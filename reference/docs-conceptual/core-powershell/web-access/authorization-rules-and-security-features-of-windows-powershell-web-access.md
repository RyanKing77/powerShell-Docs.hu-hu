---
ms.date: 06/27/2017
keywords: PowerShell, a parancsmag
title: A Webes Windows PowerShell-elérés engedélyezési szabályai és biztonsági funkciói
ms.openlocfilehash: 95c61d3a0431cda9dee738d1c9f5ec843c1209f3
ms.sourcegitcommit: 221b7daab7f597f8b2e4864cf9b5d9dda9b9879b
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 11/27/2018
ms.locfileid: "52321079"
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="d17a4-103">A Webes Windows PowerShell-elérés engedélyezési szabályai és biztonsági funkciói</span><span class="sxs-lookup"><span data-stu-id="d17a4-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="d17a4-104">Frissítve: Június 24 2013.</span><span class="sxs-lookup"><span data-stu-id="d17a4-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="d17a4-105">A következőkre vonatkozik: Windows Server 2012 R2, Windows Server 2012-ben</span><span class="sxs-lookup"><span data-stu-id="d17a4-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="d17a4-106">Windows PowerShell-elérés a Windows Server 2012 R2 és Windows Server 2012-alkalmazásban korlátozó biztonsági modellel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="d17a4-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span> <span data-ttu-id="d17a4-107">Felhasználók kifejezetten hozzáférést kell biztosítani ahhoz, hogy jelentkezzen be a Windows PowerShell-elérés átjáró és a webes Windows PowerShell-konzolt használja.</span><span class="sxs-lookup"><span data-stu-id="d17a4-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="d17a4-108">Az engedélyezési szabályok és a hely biztonságának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="d17a4-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="d17a4-109">Után a Windows PowerShell-elérés telepítése és az átjáró van konfigurálva, a felhasználó meg tudja nyitni a böngészőben a bejelentkezési oldal, de nem tudnak bejelentkezni mindaddig, amíg a Windows PowerShell-elérés rendszergazdai hozzáférést biztosít a felhasználónak explicit módon.</span><span class="sxs-lookup"><span data-stu-id="d17a4-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span> <span data-ttu-id="d17a4-110">"Windows PowerShell-elérés" hozzáférés-vezérlés kezeli az alábbi táblázatban ismertetett Windows PowerShell-parancsmagok használatával.</span><span class="sxs-lookup"><span data-stu-id="d17a4-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span> <span data-ttu-id="d17a4-111">Engedélyezési szabályok hozzáadásához és kezeléséhez nincs hasonló grafikus felhasználói felület.</span><span class="sxs-lookup"><span data-stu-id="d17a4-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="d17a4-112">Lásd: [Windows PowerShell webes elérés parancsmagjai](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps).</span><span class="sxs-lookup"><span data-stu-id="d17a4-112">See [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps).</span></span>

<span data-ttu-id="d17a4-113">Rendszergazdák meghatározhatnak `{0-n}` hitelesítési szabályokat Windows PowerShell-elérés.</span><span class="sxs-lookup"><span data-stu-id="d17a4-113">Administrators can define `{0-n}` authentication rules for Windows PowerShell Web Access.</span></span> <span data-ttu-id="d17a4-114">Az alapértelmezett biztonság inkább korlátozóak, nem pedig engedélyezők; a nulla hitelesítési szabály azt jelenti, hogy egyetlen felhasználó sem férhet hozzá semmihez.</span><span class="sxs-lookup"><span data-stu-id="d17a4-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="d17a4-115">[Add-PswaAuthorizationRule](/powershell/module/powershellwebaccess/add-pswaauthorizationrule?view=winserver2012r2-ps) és [Test-PswaAuthorizationRule](/powershell/module/powershellwebaccess/test-pswaauthorizationrule?view=winserver2012r2-ps) a Windows Server 2012 R2 tartalmaznak egy Credential paramétert, amely lehetővé teszi, hogy hozzáadását és tesztelését egy távoli Windows PowerShell-elérés engedélyezési szabályai számítógép, vagy a Windows PowerShell-elérés aktív munkamenet belül.</span><span class="sxs-lookup"><span data-stu-id="d17a4-115">[Add-PswaAuthorizationRule](/powershell/module/powershellwebaccess/add-pswaauthorizationrule?view=winserver2012r2-ps) and [Test-PswaAuthorizationRule](/powershell/module/powershellwebaccess/test-pswaauthorizationrule?view=winserver2012r2-ps) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span> <span data-ttu-id="d17a4-116">Igény szerint a többi Windows PowerShell-parancsmagok, amelyek tartalmaznak egy Credential paramétert, megadhat egy PSCredential objektumot a paraméter értékeként.</span><span class="sxs-lookup"><span data-stu-id="d17a4-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span> <span data-ttu-id="d17a4-117">A távoli számítógépnek átadni kívánt hitelesítő adatokat tartalmazó PSCredential objektum létrehozásához futtassa a [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) parancsmagot.</span><span class="sxs-lookup"><span data-stu-id="d17a4-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="d17a4-118">Windows PowerShell-elérés hitelesítési szabályai engedélyezett szabályok.</span><span class="sxs-lookup"><span data-stu-id="d17a4-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span> <span data-ttu-id="d17a4-119">Minden egyes szabály egy adott Windows PowerShell, felhasználók és célszámítógépek között engedélyezett kapcsolat definíciója [munkamenet-konfigurációk](/powershell/module/microsoft.powershell.core/about/about_session_configurations?view=powershell-5.1) (más néven végpontok vagy _futási terek_) a a megadott célszámítógépeken.</span><span class="sxs-lookup"><span data-stu-id="d17a4-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShell [session configurations](/powershell/module/microsoft.powershell.core/about/about_session_configurations?view=powershell-5.1) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="d17a4-120">A magyarázatot **futási terek** lásd [PowerShell futtatóterek használata kezdete](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="d17a4-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d17a4-121">A felhasználónak csak egy érvényes szabályra van szüksége a hozzáférés megszerzéséhez.</span><span class="sxs-lookup"><span data-stu-id="d17a4-121">A user needs only one rule to be true to get access.</span></span> <span data-ttu-id="d17a4-122">Ha a felhasználó kap hozzáférést egy számítógéphez a teljes nyelvi hozzáféréssel vagy csak Windows PowerShell távfelügyeleti parancsmagjaihoz való hozzáférés a webalapú konzol, a felhasználó jelentkezzen be (vagy Ugrás) más számítógépekre, amelyek az első célszámítógéphez csatlakoznak.</span><span class="sxs-lookup"><span data-stu-id="d17a4-122">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span> <span data-ttu-id="d17a4-123">A legbiztonságosabb módja Windows PowerShell-elérés konfigurálása, hogy csak korlátozott munkamenet-konfigurációk, amelyek lehetővé teszik, hogy szokásos módon kell távolról végrehajtani konkrét feladatok elvégzését való hozzáférés engedélyezése a felhasználóknak.</span><span class="sxs-lookup"><span data-stu-id="d17a4-123">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="d17a4-124">A hivatkozott parancsmagok [Windows PowerShell webes elérés parancsmagjai](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) lehetővé teszik hozzáférési szabályok engedélyezik a Windows PowerShell-elérés átjáró felhasználója használt készlet létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="d17a4-124">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="d17a4-125">A szabályok eltérnek a célszámítógépen található hozzáférés-vezérlési listáktól (ACL), és további biztonsági réteget biztosítanak a webes eléréshez.</span><span class="sxs-lookup"><span data-stu-id="d17a4-125">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span> <span data-ttu-id="d17a4-126">A biztonsággal kapcsolatos további részleteket a következő szakasz tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="d17a4-126">More details about security are described in the following section.</span></span>

<span data-ttu-id="d17a4-127">Ha a felhasználók nem felelnek meg az előző biztonsági rétegek bármelyikét, a böngészőjük kapott egy általános "hozzáférés megtagadva" üzenet.</span><span class="sxs-lookup"><span data-stu-id="d17a4-127">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span> <span data-ttu-id="d17a4-128">Habár az átjáró-kiszolgáló naplózza a biztonsági adatokat, a végfelhasználóknak nem jelenik meg információ arról, hogy hány biztonsági rétegnek feleltek meg, illetve melyik rétegnél nem sikerült a bejelentkezés vagy a hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="d17a4-128">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="d17a4-129">Az engedélyezési szabályok konfigurálásával kapcsolatos további információkért lásd: [engedélyezési szabályok beállításával](#configuring-authorization-rules-and-site-security) ebben a témakörben.</span><span class="sxs-lookup"><span data-stu-id="d17a4-129">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="d17a4-130">Biztonság</span><span class="sxs-lookup"><span data-stu-id="d17a4-130">Security</span></span>

<span data-ttu-id="d17a4-131">A Windows PowerShell-elérés biztonsági modellje négy réteget egy end user a webalapú konzol, és a célszámítógép között.</span><span class="sxs-lookup"><span data-stu-id="d17a4-131">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span> <span data-ttu-id="d17a4-132">A rendszergazdák Windows PowerShell-elérés az IIS-kezelő konzolon kiegészítő konfigurálással további biztonsági rétegeket adhat hozzá.</span><span class="sxs-lookup"><span data-stu-id="d17a4-132">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span> <span data-ttu-id="d17a4-133">Az IIS-kezelő konzolon webhelyek védelmével kapcsolatos további információkért lásd: [webkiszolgáló biztonságának konfigurálása (IIS7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="d17a4-133">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS7)](https://technet.microsoft.com/library/cc731278).</span></span>

<span data-ttu-id="d17a4-134">További információ az IIS ajánlott eljárásokat és -szolgáltatásmegtagadásos támadások megelőzése, lásd: [ajánlott eljárások a megakadályozza, hogy DoS/szolgáltatásmegtagadási támadások ellen](https://technet.microsoft.com/library/cc750213).</span><span class="sxs-lookup"><span data-stu-id="d17a4-134">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="d17a4-135">A rendszergazdák is vásárol, és további kiskereskedelmi hitelesítési szoftver telepítése.</span><span class="sxs-lookup"><span data-stu-id="d17a4-135">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="d17a4-136">Az alábbi táblázat a végfelhasználók és a célszámítógépek között lévő négy biztonsági réteget ismerteti.</span><span class="sxs-lookup"><span data-stu-id="d17a4-136">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="d17a4-137">Szint</span><span class="sxs-lookup"><span data-stu-id="d17a4-137">Level</span></span>|<span data-ttu-id="d17a4-138">Réteg</span><span class="sxs-lookup"><span data-stu-id="d17a4-138">Layer</span></span>|
|-|-|
|<span data-ttu-id="d17a4-139">1</span><span class="sxs-lookup"><span data-stu-id="d17a4-139">1</span></span>|[<span data-ttu-id="d17a4-140">az IIS webkiszolgáló biztonsági szolgáltatásairól</span><span class="sxs-lookup"><span data-stu-id="d17a4-140">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="d17a4-141">2</span><span class="sxs-lookup"><span data-stu-id="d17a4-141">2</span></span>|[<span data-ttu-id="d17a4-142">a Windows powershell webes hozzáférés űrlapalapú átjáró hitelesítése</span><span class="sxs-lookup"><span data-stu-id="d17a4-142">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="d17a4-143">3</span><span class="sxs-lookup"><span data-stu-id="d17a4-143">3</span></span>|[<span data-ttu-id="d17a4-144">a Windows powershell web access engedélyezési szabályok</span><span class="sxs-lookup"><span data-stu-id="d17a4-144">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="d17a4-145">4</span><span class="sxs-lookup"><span data-stu-id="d17a4-145">4</span></span>|[<span data-ttu-id="d17a4-146">cél hitelesítési és engedélyezési szabályok</span><span class="sxs-lookup"><span data-stu-id="d17a4-146">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="d17a4-147">Az egyes rétegek részletes információkat találhat a következő kategóriákban:</span><span class="sxs-lookup"><span data-stu-id="d17a4-147">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="d17a4-148">IIS-webkiszolgáló biztonsági funkciók</span><span class="sxs-lookup"><span data-stu-id="d17a4-148">IIS Web Server security features</span></span>

<span data-ttu-id="d17a4-149">Windows PowerShell-elérés felhasználók mindig adjon meg egy felhasználónevet és jelszót a fiókjuk az átjáró hitelesítése.</span><span class="sxs-lookup"><span data-stu-id="d17a4-149">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span> <span data-ttu-id="d17a4-150">Azonban a rendszergazdák Windows PowerShell-elérés is is választható ügyféltanúsítvány-alapú hitelesítés ki- vagy bekapcsolja, lásd: [telepítése és használata a windows powershell-elérés](install-and-use-windows-powershell-web-access.md) teszttanúsítványt engedélyezéséhez és újabb verziók, konfigurálása egy eredeti tanúsítvánnyal).</span><span class="sxs-lookup"><span data-stu-id="d17a4-150">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="d17a4-151">A választható ügyféltanúsítvány-alapú szolgáltatás megköveteli, hogy a végfelhasználók felhasználónevükön és jelszavukon kívül érvényes ügyféltanúsítvánnyal rendelkezzenek, ami a webkiszolgáló (IIS) konfigurációjának részét képezi.</span><span class="sxs-lookup"><span data-stu-id="d17a4-151">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span> <span data-ttu-id="d17a4-152">Ha az ügyféltanúsítvány rétege engedélyezve van, akkor a Windows PowerShell-elérés bejelentkezési oldal kéri a felhasználóktól, érvényes tanúsítványok megadását, mielőtt értékeli ki a bejelentkezési hitelesítő adataikat.</span><span class="sxs-lookup"><span data-stu-id="d17a4-152">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span> <span data-ttu-id="d17a4-153">Ügyféltanúsítvány-alapú hitelesítés automatikusan ellenőrzi az ügyfél tanúsítványát.</span><span class="sxs-lookup"><span data-stu-id="d17a4-153">Client certificate authentication automatically checks for the client certificate.</span></span> <span data-ttu-id="d17a4-154">Ha nem található érvényes tanúsítvány, a Windows PowerShell-elérés a így azok megadhatják a tanúsítványt tájékoztatja a felhasználókat.</span><span class="sxs-lookup"><span data-stu-id="d17a4-154">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span> <span data-ttu-id="d17a4-155">Ha érvényes ügyféltanúsítványt talál, a Windows PowerShell-elérés megnyitja a bejelentkezési oldalt a felhasználók számára adja meg a felhasználóneveket és jelszavakat.</span><span class="sxs-lookup"><span data-stu-id="d17a4-155">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="d17a4-156">Itt látható egy példa az IIS webkiszolgáló által felkínált kiegészítő biztonsági beállításokra.</span><span class="sxs-lookup"><span data-stu-id="d17a4-156">This is one example of additional security settings that are offered by IIS Web Server.</span></span> <span data-ttu-id="d17a4-157">Egyéb IIS biztonsági funkciókkal kapcsolatos további információkért lásd: [webkiszolgáló biztonságának konfigurálása (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="d17a4-157">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="d17a4-158">Windows PowerShell-elérés űrlapalapú átjáró hitelesítése</span><span class="sxs-lookup"><span data-stu-id="d17a4-158">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="d17a4-159">A Windows PowerShell-elérés bejelentkezési oldal hitelesítő adatait (felhasználónév és jelszó) szükséges, és lehetővé teszi a felhasználók a, a célszámítógéphez eltérő hitelesítő adatokat adjanak.</span><span class="sxs-lookup"><span data-stu-id="d17a4-159">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="d17a4-160">Ha a felhasználó nem ad meg más hitelesítő adatokat, az átjáróhoz való csatlakozáshoz használt elsődleges felhasználónév és jelszó használható a célszámítógéphez való csatlakozáshoz is.</span><span class="sxs-lookup"><span data-stu-id="d17a4-160">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="d17a4-161">A szükséges hitelesítő adatok hitelesítése, a Windows PowerShell Web Access-átjárón.</span><span class="sxs-lookup"><span data-stu-id="d17a4-161">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="d17a4-162">Ezeket a hitelesítő adatokat kell érvényes felhasználói fiókkal, vagy a helyi Windows PowerShell-elérés átjárókiszolgálón, vagy az Active Directoryban.</span><span class="sxs-lookup"><span data-stu-id="d17a4-162">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="d17a4-163">Windows PowerShell-elérés engedélyezési szabályai</span><span class="sxs-lookup"><span data-stu-id="d17a4-163">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="d17a4-164">Az átjáró a felhasználó hitelesítése után a Windows PowerShell-elérés engedélyezési szabályokat, győződjön meg arról, ha a felhasználó rendelkezik-e a kért célszámítógéphez való hozzáférést ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="d17a4-164">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span> <span data-ttu-id="d17a4-165">A sikeres hitelesítést követően a felhasználó hitelesítő adatai továbbítódnak a célszámítógépre.</span><span class="sxs-lookup"><span data-stu-id="d17a4-165">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="d17a4-166">A rendszer a szabályok értékelését csak a felhasználó átjáró által történt hitelesítése után, és a felhasználó célszámítógépen történő hitelesítése előtt végzi el.</span><span class="sxs-lookup"><span data-stu-id="d17a4-166">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="d17a4-167">Cél hitelesítési és engedélyezési szabályok</span><span class="sxs-lookup"><span data-stu-id="d17a4-167">Target authentication and authorization rules</span></span>

<span data-ttu-id="d17a4-168">A Windows PowerShell-elérés biztonságának végső rétegét a célként megadott számítógép saját biztonsági konfigurációs.</span><span class="sxs-lookup"><span data-stu-id="d17a4-168">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span> <span data-ttu-id="d17a4-169">Felhasználók kell rendelkeznie a konfigurált a cél számítógépen és a Windows PowerShell-elérés engedélyezési szabályokat, a megfelelő hozzáférési jogosultságokkal futtatásához egy Windows PowerShell webalapú konzol, amely befolyásolja a célszámítógépet a Windows PowerShell-elérés keresztül.</span><span class="sxs-lookup"><span data-stu-id="d17a4-169">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="d17a4-170">Ez a réteg ugyanazt a biztonsági mechanizmust, amely a csatlakozási próbálkozásokat értékelné ki, ha a felhasználók megpróbálnának létrehozni egy távoli Windows PowerShell-munkamenetet a Windows Powershellen belülről a célszámítógéphez futtatásával kínálja a [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) vagy [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) parancsmagok.</span><span class="sxs-lookup"><span data-stu-id="d17a4-170">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="d17a4-171">Alapértelmezés szerint a az átjáró és a cél számítógépen is, a Windows PowerShell-elérés használ az elsődleges felhasználónevet és jelszót.</span><span class="sxs-lookup"><span data-stu-id="d17a4-171">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span> <span data-ttu-id="d17a4-172">A webalapú bejelentkezési oldal, szakaszban található **választható csatlakozási beállítások**, lehetővé teszi a felhasználók a, eltérő hitelesítő adatokat adjanak a célszámítógéphez, amennyiben azok szükségesek.</span><span class="sxs-lookup"><span data-stu-id="d17a4-172">The web-based sign-in page, in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer, if they are required.</span></span> <span data-ttu-id="d17a4-173">Ha a felhasználó nem ad meg más hitelesítő adatokat, az átjáróhoz való csatlakozáshoz használt elsődleges felhasználónév és jelszó használható a célszámítógéphez való csatlakozáshoz is.</span><span class="sxs-lookup"><span data-stu-id="d17a4-173">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="d17a4-174">Az engedélyezési szabályok segítségével engedélyezhető a felhasználók számára, hogy hozzáférjenek egy adott munkamenet-konfigurációhoz.</span><span class="sxs-lookup"><span data-stu-id="d17a4-174">Authorization rules can be used to allow users access to a particular session configuration.</span></span> <span data-ttu-id="d17a4-175">Létrehozhat _korlátozott futási terek_ vagy a Windows PowerShell-elérés, a munkamenet-konfigurációk és meghatározott felhasználók számára, hogy csak meghatározott munkamenet-konfigurációk csatlakozás Windows PowerShell-elérés való bejelentkezéskor.</span><span class="sxs-lookup"><span data-stu-id="d17a4-175">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access, and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span> <span data-ttu-id="d17a4-176">A hozzáférés-vezérlési listák (ACL) segítségével meghatározhatja, hogy mely felhasználók férhessenek hozzá a meghatározott végpontokhoz, és a jelen szakaszban ismertetett engedélyezési szabályok használatával a felhasználók adott csoportja számára tovább korlátozhatja a végponthoz való hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="d17a4-176">You can use access control lists (ACLs) to determine which users have access to specific endpoints, and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span> <span data-ttu-id="d17a4-177">Korlátozott futtatóterek kapcsolatos további információkért lásd: [létrehozása egy korlátozott futási térrel](https://msdn.microsoft.com/library/dn614668).</span><span class="sxs-lookup"><span data-stu-id="d17a4-177">For more information about restricted runspaces, see [Creating a constrained runspace](https://msdn.microsoft.com/library/dn614668).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="d17a4-178">Az engedélyezési szabályok konfigurálása</span><span class="sxs-lookup"><span data-stu-id="d17a4-178">Configuring authorization rules</span></span>

<span data-ttu-id="d17a4-179">Rendszergazdák valószínűleg szeretné azonos engedélyezési szabály a Windows PowerShell-elérés felhasználók számára, amely a Windows PowerShell távoli kezelési környezetükben már definiálva van.</span><span class="sxs-lookup"><span data-stu-id="d17a4-179">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span> <span data-ttu-id="d17a4-180">A jelen szakaszban található első eljárás ismerteti, hogyan adható hozzá egy olyan engedélyezési szabály, amely egy felhasználó számára biztosít hozzáférést, aki a bejelentkezés után egy számítógépet kezelhet, és csak egyetlen munkamenet-konfigurációban.</span><span class="sxs-lookup"><span data-stu-id="d17a4-180">The first procedure in this section describes how to add a secure authorization rule that grants access to one user, signing in to manage one computer, and within a single session configuration.</span></span> <span data-ttu-id="d17a4-181">A második eljárás egy olyan engedélyezési szabály eltávolítását ismerteti, amelyre már nincs szükség.</span><span class="sxs-lookup"><span data-stu-id="d17a4-181">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="d17a4-182">Ha azt tervezi, egyéni munkamenet-konfigurációk használatával meghatározott felhasználók számára csak a Windows PowerShell-elérés korlátozott futtatóterek belül működik, a rájuk hivatkozó engedélyezési szabályok hozzáadása előtt hozzon létre az egyéni munkamenet-konfigurációk.</span><span class="sxs-lookup"><span data-stu-id="d17a4-182">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access, create your custom session configurations before you add authorization rules that refer to them.</span></span> <span data-ttu-id="d17a4-183">A Windows PowerShell-elérés parancsmagjai nem hozhat létre egyéni munkamenet-konfigurációk.</span><span class="sxs-lookup"><span data-stu-id="d17a4-183">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span> <span data-ttu-id="d17a4-184">Egyéni munkamenet-konfigurációk létrehozásával kapcsolatos további információkért lásd: [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="d17a4-184">For more information about creating custom session configurations, see [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="d17a4-185">Windows PowerShell-elérés parancsmagjai támogatja egy helyettesítő karaktert, a csillag ( \* ).</span><span class="sxs-lookup"><span data-stu-id="d17a4-185">Windows PowerShell Web Access cmdlets support one wildcard character, an asterisk ( \* ).</span></span> <span data-ttu-id="d17a4-186">A helyettesítő karakterek nem használhatók a sztringeken belül; tulajdonságonként (felhasználók, számítógépek vagy munkamenet-konfigurációk) egyetlen csillag használható.</span><span class="sxs-lookup"><span data-stu-id="d17a4-186">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> [!NOTE]
> <span data-ttu-id="d17a4-187">A témakör a további lehetőségek az engedélyezési szabályok segítségével felhasználók hozzáférésének megadásához és a Windows PowerShell-elérés környezet biztonságának [más engedélyezési szabály forgatókönyv példáit](#other-authorization-rule-scenario-examples) ebben a témakörben.</span><span class="sxs-lookup"><span data-stu-id="d17a4-187">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment, see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="d17a4-188">Korlátozó engedélyezési szabály hozzáadása</span><span class="sxs-lookup"><span data-stu-id="d17a4-188">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="d17a4-189">Hajtsa végre az alábbi lépéseket egy Windows PowerShell-munkamenetet emelt szintű felhasználói jogosultsággal nyissa meg.</span><span class="sxs-lookup"><span data-stu-id="d17a4-189">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

   - <span data-ttu-id="d17a4-190">A Windows asztalon kattintson a jobb gombbal **Windows PowerShell** a tálcán, és kattintson a **Futtatás rendszergazdaként**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-190">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>

   - <span data-ttu-id="d17a4-191">A Windows a **Start** kattintson a jobb gombbal **Windows PowerShell**, és kattintson a **Futtatás rendszergazdaként**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-191">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="d17a4-192">**Nem kötelező lépés** felhasználói hozzáférés korlátozására munkamenet-konfigurációk használatával:</span><span class="sxs-lookup"><span data-stu-id="d17a4-192">**Optional step** For restricting user access by using session configurations:</span></span>

   <span data-ttu-id="d17a4-193">Győződjön meg arról, hogy a munkamenet-konfigurációk, amelyeket szeretne használni, már léteznek a szabályokban.</span><span class="sxs-lookup"><span data-stu-id="d17a4-193">Verify that the session configurations that you want to use, already exist in your rules .</span></span>

   <span data-ttu-id="d17a4-194">Ha azok még nem lett hozott, alkalmaznia munkamenet-konfigurációk létrehozására vonatkozó [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="d17a4-194">If they have not yet been created, use instructions for creating session configurations in [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="d17a4-195">Ez az engedélyezési szabály lehetővé teszi egy adott felhasználó hozzáférését egy adott számítógépre a hálózaton, amelyhez általában van hozzáférése egy adott munkamenet-konfiguráció, ami a felhasználói hozzáférést a(z)™ s tipikus parancsfájl-kezelési és parancsmag-igényeihez.</span><span class="sxs-lookup"><span data-stu-id="d17a4-195">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user'™s typical scripting and cmdlet needs.</span></span> <span data-ttu-id="d17a4-196">Írja be a következőt, majd nyomja le **Enter**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-196">Type the following, and then press **Enter**.</span></span>

   ```
   Add-PswaAuthorizationRule -UserName <domain\user | computer\user> `
      -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
   ```

   - <span data-ttu-id="d17a4-197">A következő példában egy felhasználó nevű _JSmith_ a a _Contoso_ tartományi hozzáférést kap a számítógép felügyeletéhez _Contoso_214_, és a egy munkamenet-konfiguráció használata _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="d17a4-197">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

   ```powershell
   Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' `
      -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
   ```

4. <span data-ttu-id="d17a4-198">Győződjön meg arról, hogy az a szabály futtatásával hozták-e a **Get-PswaAuthorizationRule** parancsmagot, vagy `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span><span class="sxs-lookup"><span data-stu-id="d17a4-198">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span></span>
   <span data-ttu-id="d17a4-199">Például: `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span><span class="sxs-lookup"><span data-stu-id="d17a4-199">For example, `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="d17a4-200">Az engedélyezési szabály eltávolítása</span><span class="sxs-lookup"><span data-stu-id="d17a4-200">To remove an authorization rule</span></span>

1. <span data-ttu-id="d17a4-201">Ha egy Windows PowerShell-munkamenetben még nem nyitott, tekintse meg az 1. lépés a [korlátozó engedélyezési szabály hozzáadása](#to-add-a-restrictive-authorization-rule) ebben a szakaszban.</span><span class="sxs-lookup"><span data-stu-id="d17a4-201">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="d17a4-202">Írja be a következőt, majd nyomja le **Enter**, ahol *szabályazonosítóval* jelöli, hogy el kívánja távolítani a szabály az egyedi azonosító szám.</span><span class="sxs-lookup"><span data-stu-id="d17a4-202">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

   ```
   Remove-PswaAuthorizationRule -ID <rule ID>
   ```

   <span data-ttu-id="d17a4-203">Másik lehetőségként, ha nem ismeri a azonosítószámát, de tudja az eltávolítani kívánt szabály rövid nevét, is a szabály nevét, és átadhatja azt a `Remove-PswaAuthorizationRule` parancsmagot, hogy a szabály eltávolításához az alábbi példában látható módon:</span><span class="sxs-lookup"><span data-stu-id="d17a4-203">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example:</span></span>

   ```
   Get-PswaAuthorizationRule `
      -RuleName <rule-name> | Remove-PswaAuthorizationRule
   ```

> [!NOTE]
> <span data-ttu-id="d17a4-204">A rendszer nem kéri, erősítse meg, hogy szeretné-e a megadott engedélyezési szabály; törlése a szabály törlődik, amikor lenyomja **Enter**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-204">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="d17a4-205">A `Remove-PswaAuthorizationRule` parancsmagot csak akkor futtassa, ha biztosan el kívánja távolítani az engedélyezési szabályt.</span><span class="sxs-lookup"><span data-stu-id="d17a4-205">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="d17a4-206">Példák az engedélyezési szabály egyéb eltávolítási módjaira</span><span class="sxs-lookup"><span data-stu-id="d17a4-206">Other authorization rule scenario examples</span></span>

<span data-ttu-id="d17a4-207">Minden Windows PowerShell-munkamenetben; munkamenet-konfigurációt használ Ha az egyik egy munkamenethez nincs megadva, a Windows PowerShell az alapértelmezett, beépített Windows PowerShell munkamenet-konfiguráció, neve Microsoft.PowerShell használja.</span><span class="sxs-lookup"><span data-stu-id="d17a4-207">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="d17a4-208">Az alapértelmezett munkamenet-konfiguráció a számítógépen elérhető összes parancsmagot tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="d17a4-208">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="d17a4-209">A rendszergazdák egy korlátozott futási teret (a parancsmagok és a végfelhasználóik által végrehajtható feladatok korlátozott tartománya) tartalmazó munkamenet-konfiguráció definiálásával korlátozhatják az összes számítógéphez való hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="d17a4-209">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="d17a4-210">A felhasználó, aki egy számítógép teljes nyelvi hozzáféréssel vagy csak a Windows PowerShell távfelügyeleti parancsmagjaihoz való hozzáféréssel csatlakozhat más számítógépek, amelyek az első számítógéphez csatlakoznak.</span><span class="sxs-lookup"><span data-stu-id="d17a4-210">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="d17a4-211">Korlátozott futási térrel definiálása megakadályozhatja, hogy a felhasználók a saját engedélyezett Windows PowerShell futási térben más számítógépek elérése, és biztonságosabbá teszi a Windows PowerShell-elérés környezetében.</span><span class="sxs-lookup"><span data-stu-id="d17a4-211">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="d17a4-212">A munkamenet-konfigurációt azokon a számítógépeken, amelyek a rendszergazdák elérhetővé kívánnak tenni keresztül a Windows PowerShell-elérés terjeszthetők ki (a csoportházirend használatával).</span><span class="sxs-lookup"><span data-stu-id="d17a4-212">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="d17a4-213">Munkamenet-konfigurációkkal kapcsolatos további információkért lásd: [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span><span class="sxs-lookup"><span data-stu-id="d17a4-213">For more information about session configurations, see [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span></span> <span data-ttu-id="d17a4-214">Az alábbiakban bemutatunk néhány példát erre a témakörre.</span><span class="sxs-lookup"><span data-stu-id="d17a4-214">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="d17a4-215">A rendszergazda létrehoz egy végpontot, nevű **PswaEndpoint**, korlátozott futási térrel.</span><span class="sxs-lookup"><span data-stu-id="d17a4-215">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="d17a4-216">Ezt követően a rendszergazda létrehoz egy szabályt `*,*,PswaEndpoint`, és elosztja a végpontot a többi számítógéphez.</span><span class="sxs-lookup"><span data-stu-id="d17a4-216">Then, the administrator creates a rule, `*,*,PswaEndpoint`, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="d17a4-217">A szabály lehetővé teszi, hogy minden felhasználó számára a végponttal rendelkező minden számítógép **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-217">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span>
  <span data-ttu-id="d17a4-218">Ha a szabálykészletben ez az egyetlen definiált engedélyezési szabály, az ezzel a végponttal nem rendelkező számítógépek nem lesznek elérhetők.</span><span class="sxs-lookup"><span data-stu-id="d17a4-218">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="d17a4-219">A rendszergazda létrehozott egy végpontot egy korlátozott futási térrel rendelkező nevű **PswaEndpoint**, és bizonyos felhasználók hozzáférését korlátozni kívánja.</span><span class="sxs-lookup"><span data-stu-id="d17a4-219">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="d17a4-220">A rendszergazda létrehoz egy csoport nevű **Level1Support**, és a következő szabályt definiálja: **Level1Support,\*, PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-220">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="d17a4-221">A szabály engedélyezi a csoportban lévő egyik felhasználóra sem **Level1Support** összes számítógépet, amelynél a hozzáférést a **PswaEndpoint** konfigurációja.</span><span class="sxs-lookup"><span data-stu-id="d17a4-221">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="d17a4-222">Hasonlóképpen, a hozzáférés korlátozható egy meghatározott számítógépcsoportra.</span><span class="sxs-lookup"><span data-stu-id="d17a4-222">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="d17a4-223">Néhány rendszergazda bizonyos felhasználóknak több hozzáférést biztosít, mint a többieknek.</span><span class="sxs-lookup"><span data-stu-id="d17a4-223">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="d17a4-224">Ha például a rendszergazda létrehoz két felhasználói csoportot, **rendszergazdák** és **BasicSupport**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-224">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="d17a4-225">A rendszergazda létrehoz továbbá egy végpontot egy korlátozott futási teret nevű **PswaEndpoint**, és a következő két szabályt definiálja: **Admins,\*,\***  és  **BasicSupport,\*, PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-225">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="d17a4-226">Az első szabály lévő összes felhasználó számára biztosít a **rendszergazdai** az összes számítógép és a második szabály a csoport hozzáférést biztosít az összes felhasználó a **BasicSupport** csoporthoz hozzáféréssel rendelkező számítógépekhez csak  **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="d17a4-226">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="d17a4-227">A rendszergazda beállított egy privát tesztkörnyezetet, és szeretné engedélyezni az összes jogosult hálózati felhasználó számára a hozzáférést a hálózaton található összes olyan számítógéphez, amelyhez általában hozzáférhetnek, az összes olyan munkamenet-konfigurációhoz való hozzáféréssel, amelyhez általában hozzáférhetnek.</span><span class="sxs-lookup"><span data-stu-id="d17a4-227">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="d17a4-228">Mivel ez egy privát tesztkörnyezet, a rendszergazda egy nem biztonságos engedélyezési szabályt hoz létre.</span><span class="sxs-lookup"><span data-stu-id="d17a4-228">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span> <span data-ttu-id="d17a4-229">– A rendszergazda futtatja a parancsmagot `Add-PswaAuthorizationRule * * *`, helyettesítő karaktert használja, amely **\*** minden felhasználó, az összes számítógép és az összes konfiguráció képviseletére.</span><span class="sxs-lookup"><span data-stu-id="d17a4-229">- The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span> <span data-ttu-id="d17a4-230">– Ez a szabály megegyezik a következők közül: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="d17a4-230">- This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  > [!NOTE]
  > <span data-ttu-id="d17a4-231">Ez a szabály biztonságos környezetben nem ajánlott, és figyelmen kívül hagyja a rétegre vonatkozó engedélyezési szabályt Windows PowerShell-elérés által biztosított biztonsági.</span><span class="sxs-lookup"><span data-stu-id="d17a4-231">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="d17a4-232">A rendszergazdának egy olyan környezetben kell engedélyeznie a felhasználók számára a célszámítógépekhez történő csatlakozást, amely egyaránt tartalmaz munkacsoportokat és tartományokat, ahol munkacsoportok számítógépeit alkalmanként a tartományokban lévő célszámítógépekhez való csatlakozáshoz használják, a tartományokban levő számítógépeket pedig alkalmanként a munkacsoportokban lévő célszámítógépekhez való csatlakozáshoz használják.</span><span class="sxs-lookup"><span data-stu-id="d17a4-232">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="d17a4-233">A rendszergazda egy átjárókiszolgáló *PswaServer*, munkacsoportban; és a célszámítógép *srv1.contoso.com* tartományban van.</span><span class="sxs-lookup"><span data-stu-id="d17a4-233">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="d17a4-234">Felhasználói *Chris* jogosult helyi felhasználója a munkacsoport átjárókiszolgálónak és a cél számítógépen is van.</span><span class="sxs-lookup"><span data-stu-id="d17a4-234">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="d17a4-235">A munkacsoport-kiszolgálón a felhasználónév *chrisLocal*; a felhasználó neve, a célszámítógépen pedig *contoso\\chris*.</span><span class="sxs-lookup"><span data-stu-id="d17a4-235">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="d17a4-236">Ahhoz, hogy engedélyezze Chris számára a srv1.contoso.com célszámítógéphez való hozzáférést, rendszergazda a következő szabályt adja hozzá.</span><span class="sxs-lookup"><span data-stu-id="d17a4-236">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal `
   -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="d17a4-237">Az előző példában a szabály hitelesíti Christ az átjárókiszolgálón, majd engedélyezi számára a hozzáférést a *srv1*.</span><span class="sxs-lookup"><span data-stu-id="d17a4-237">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="d17a4-238">A bejelentkezési oldalon Chrisnek meg kell adnia a hitelesítő adatokat egy második együttesét a **választható csatlakozási beállítások** területen (*contoso\\chris*).</span><span class="sxs-lookup"><span data-stu-id="d17a4-238">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="d17a4-239">Az átjáró-kiszolgálót a további hitelesítő adatokat használja a cél számítógépen hitelesíti *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="d17a4-239">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="d17a4-240">Az előző esetben a Windows PowerShell-elérés a cél számítógéphez sikeres kapcsolatot létesít a csak után a következő volt sikeres, és legalább egy engedélyezési szabály által engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="d17a4-240">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="d17a4-241">Hitelesítés a munkacsoport átjárókiszolgálónak egy felhasználónevet a következő formátumban hozzáadásával *kiszolgáló_neve*\\*felhasználónév* az engedélyezési szabály</span><span class="sxs-lookup"><span data-stu-id="d17a4-241">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="d17a4-242">Hitelesítés a célszámítógépen a bejelentkezési oldalon a megadott másodlagos hitelesítő adatok használatával a **választható csatlakozási beállítások** terület</span><span class="sxs-lookup"><span data-stu-id="d17a4-242">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

   > [!NOTE]
   > <span data-ttu-id="d17a4-243">Ha az átjáró-számítógép és a célszámítógép különböző munkacsoportokban vagy tartományokban vannak, megbízhatósági kapcsolatot kell létrehozni a két munkacsoport-számítógép, a két tartomány vagy a munkacsoport és a tartomány között.</span><span class="sxs-lookup"><span data-stu-id="d17a4-243">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="d17a4-244">Ez a kapcsolat nem konfigurálható a Windows PowerShell-elérés engedélyezési szabályokra vonatkozó parancsmagjainak használatával.</span><span class="sxs-lookup"><span data-stu-id="d17a4-244">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="d17a4-245">Az engedélyezési szabályok nem határoznak meg megbízhatósági kapcsolatot a számítógépek között, csak a felhasználóknak engedélyezik, hogy az adott célszámítógépekhez és munkamenet-konfigurációkhoz csatlakozzanak.</span><span class="sxs-lookup"><span data-stu-id="d17a4-245">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="d17a4-246">Különböző tartományok közötti megbízhatósági kapcsolat konfigurálásával kapcsolatos további információkért lásd: [létrehozása tartományi és erdőszintű Megbízhatóságok](https://technet.microsoft.com/library/cc794775.aspx).</span><span class="sxs-lookup"><span data-stu-id="d17a4-246">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx).</span></span>
   > <span data-ttu-id="d17a4-247">További információ a munkacsoport-számítógépek hozzáadása a megbízható gazdagépek listájához: [távoli felügyelet a Kiszolgálókezelővel](https://technet.microsoft.com/library/dd759202.aspx).</span><span class="sxs-lookup"><span data-stu-id="d17a4-247">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](https://technet.microsoft.com/library/dd759202.aspx).</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="d17a4-248">Egyetlen engedélyezési szabálykészlet használata több helyhez</span><span class="sxs-lookup"><span data-stu-id="d17a4-248">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="d17a4-249">Az engedélyezési szabályok XML-fájlban tárolódnak.</span><span class="sxs-lookup"><span data-stu-id="d17a4-249">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="d17a4-250">Alapértelmezés szerint az XML-fájl elérési útja a `%windir%\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span><span class="sxs-lookup"><span data-stu-id="d17a4-250">By default, the path name of the XML file is `%windir%\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span></span>

<span data-ttu-id="d17a4-251">Az engedélyezési szabályok XML-fájl elérési útját tárolja a **powwa.config** fájlt, amely megtalálható a `%windir%\Web\PowershellWebAccess\data`.</span><span class="sxs-lookup"><span data-stu-id="d17a4-251">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in `%windir%\Web\PowershellWebAccess\data`.</span></span> <span data-ttu-id="d17a4-252">A rendszergazda rugalmasan módosíthatja az alapértelmezett elérési utat mutató hivatkozás **powwa.config** vagy követelményeknek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="d17a4-252">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="d17a4-253">Lehetővé teszi a rendszergazda módosíthatja a fájl helyét lehetővé teszi, hogy több Windows PowerShell-elérés átjáró használja ugyanazokat az engedélyezési szabályokat, ha ilyen konfiguráció van szükség.</span><span class="sxs-lookup"><span data-stu-id="d17a4-253">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="d17a4-254">Munkamenet-kezelés</span><span class="sxs-lookup"><span data-stu-id="d17a4-254">Session management</span></span>

<span data-ttu-id="d17a4-255">Alapértelmezés szerint a Windows PowerShell-elérés egy felhasználó egy adott időpontban legfeljebb három munkamenet használatára korlátozza.</span><span class="sxs-lookup"><span data-stu-id="d17a4-255">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="d17a4-256">Szerkesztheti a webalkalmazás **web.config** fájlt az IIS-kezelő felhasználói munkamenetek különböző számú támogatásához.</span><span class="sxs-lookup"><span data-stu-id="d17a4-256">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span> <span data-ttu-id="d17a4-257">Az elérési útját a **web.config** fájl `$Env:Windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span><span class="sxs-lookup"><span data-stu-id="d17a4-257">The path to the **web.config** file is `$Env:Windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span></span>

<span data-ttu-id="d17a4-258">Alapértelmezés szerint az IIS webkiszolgáló úgy van beállítva, az alkalmazáskészlet újraindítása, ha bármilyen beállítás szerkesztése.</span><span class="sxs-lookup"><span data-stu-id="d17a4-258">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="d17a4-259">Az alkalmazáskészlet újraindul például, ha a módosítások a **web.config** fájlt.</span><span class="sxs-lookup"><span data-stu-id="d17a4-259">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span> <span data-ttu-id="d17a4-260">> mert **Windows PowerShell-elérés** használ a memórián belüli munkamenet-állapotok, > bejelentkezett felhasználók **Windows PowerShell-elérés** munkamenetek elveszítik munkameneteiket, amikor az alkalmazáskészlet újraindul.</span><span class="sxs-lookup"><span data-stu-id="d17a4-260">>Because **Windows PowerShell Web Access** uses in-memory session states, >users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="d17a4-261">A bejelentkezési oldalon megjelenő alapértelmezett paraméterek beállítása</span><span class="sxs-lookup"><span data-stu-id="d17a4-261">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="d17a4-262">Ha a Windows PowerShell-elérés átjáró Windows Server 2012 R2 rendszeren fut, konfigurálhatja a Windows PowerShell-elérés bejelentkezési lapon megjelenő beállítások alapértelmezett értékeit.</span><span class="sxs-lookup"><span data-stu-id="d17a4-262">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="d17a4-263">Beállíthatja, hogy az értékek a **web.config** fájlt, amely az előző bekezdésben leírt.</span><span class="sxs-lookup"><span data-stu-id="d17a4-263">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="d17a4-264">A bejelentkezési oldal beállításainak alapértelmezett értékek találhatók a **appSettings** szakasz a web.config fájl; az alábbiakban egy példát a a **appSettings** szakaszban.</span><span class="sxs-lookup"><span data-stu-id="d17a4-264">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="d17a4-265">Számos beállítás érvényes értékei a következők ugyanazok, mint a megfelelő paraméterértékeivel a [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) parancsmagot a Windows PowerShellben.</span><span class="sxs-lookup"><span data-stu-id="d17a4-265">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span></span>

<span data-ttu-id="d17a4-266">Ha például a `defaultApplicationName` kulcs, ahogyan az az alábbi kódblokkot az az érték a **$PSSessionApplicationName** preferenciaváltozó a célszámítógépen.</span><span class="sxs-lookup"><span data-stu-id="d17a4-266">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
  <appSettings>
      <add key="maxSessionsAllowedPerUser" value="3"/>
      <add key="defaultPortNumber" value="5985"/>
      <add key="defaultSSLPortNumber" value="5986"/>
      <add key="defaultApplicationName" value="WSMAN"/>
      <add key="defaultUseSslSelection" value="0"/>
      <add key="defaultAuthenticationType" value="0"/>
      <add key="defaultAllowRedirection" value="0"/>
      <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
  </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="d17a4-267">Időtúllépések és nem tervezett szétkapcsolások</span><span class="sxs-lookup"><span data-stu-id="d17a4-267">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="d17a4-268">Windows PowerShell-elérés munkamenetek időkorlátja lejárt. A Windows PowerShell-elérés Windows Server 2012 rendszeren fut egy időtúllépési üzenet jelenik meg a bejelentkezett felhasználók számára 15 perc a munkamenet inaktivitás után.</span><span class="sxs-lookup"><span data-stu-id="d17a4-268">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="d17a4-269">Ha a felhasználó az időtúllépési üzenet megjelenését követő 5 percen belül nem válaszol, a munkamenet véget ér, és a rendszer kijelentkezteti a felhasználót. Az IIS-kezelőben a webhely beállításainál módosíthatja a munkamenetekre vonatkozó időkorlátok időtartamát.</span><span class="sxs-lookup"><span data-stu-id="d17a4-269">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="d17a4-270">A Windows PowerShell-elérés futó Windows Server 2012 R2, a munkamenetek időkorlátja lejárt, alapértelmezés szerint 20 perc inaktivitás után.</span><span class="sxs-lookup"><span data-stu-id="d17a4-270">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="d17a4-271">Ha a felhasználók közül a webalapú konzolon hálózati hibák vagy egyéb nem tervezett leállások vagy hibák miatt, és nem azért, mert azok bezárta a munkameneteket magukat, a Windows PowerShell-elérés munkamenetek folytatják a futást, csatlakoztatva célszámítógépekhez, amíg az ügyfél oldalán le nem telik időkorlát.</span><span class="sxs-lookup"><span data-stu-id="d17a4-271">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="d17a4-272">A munkamenet leválasztása vagy az alapértelmezett 20 perc lejárata után, vagy az átjáró rendszergazdája által megadott időtartam lejárata után (amelyik rövidebb) történik meg.</span><span class="sxs-lookup"><span data-stu-id="d17a4-272">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="d17a4-273">Ha az átjáró-kiszolgálót futtat Windows Server 2012 R2, Windows PowerShell-elérés lehetővé teszi a felhasználók mentett munkamenetek egy későbbi időpontban, de a hálózati hibák, nem tervezett leállások vagy más hibák leválasztani a munkameneteket, amikor a felhasználók nem látják és újból menteni mindaddig, amíg az átjáró által meghatározott időkorlát időtartama után a rendszergazda lejárt munkamenet.</span><span class="sxs-lookup"><span data-stu-id="d17a4-273">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="d17a4-274">Lásd még:</span><span class="sxs-lookup"><span data-stu-id="d17a4-274">See Also</span></span>

<span data-ttu-id="d17a4-275">[Telepítheti és használhatja a Windows PowerShell-Elérésbe](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span><span class="sxs-lookup"><span data-stu-id="d17a4-275">[Install and Use Windows PowerShell Web Access](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span></span>

[<span data-ttu-id="d17a4-276">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="d17a4-276">about_Session_Configurations</span></span>](https://technet.microsoft.com/library/dd819508.aspx)

[<span data-ttu-id="d17a4-277">Windows PowerShell webes elérés parancsmagjai</span><span class="sxs-lookup"><span data-stu-id="d17a4-277">Windows PowerShell Web Access Cmdlets</span></span>](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps)
