---
ms.date: 07/10/2019
keywords: jea, PowerShell, biztonság
title: JEA biztonsági megfontolások
ms.openlocfilehash: befc24fec368c4f6d60477daf63bf17e9431133e
ms.sourcegitcommit: e894ed833cef57967cdaf002f8c883f66864e836
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/25/2019
ms.locfileid: "70017908"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="fd406-103">JEA biztonsági megfontolások</span><span class="sxs-lookup"><span data-stu-id="fd406-103">JEA Security Considerations</span></span>

<span data-ttu-id="fd406-104">A JEA segít a biztonsági helyzet javításában azáltal, hogy csökkenti a gépek állandó rendszergazdáinak számát.</span><span class="sxs-lookup"><span data-stu-id="fd406-104">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="fd406-105">A JEA egy PowerShell-munkamenet-konfigurációt használ egy új belépési pont létrehozásához a felhasználók számára a rendszer felügyeletéhez.</span><span class="sxs-lookup"><span data-stu-id="fd406-105">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="fd406-106">Azok a felhasználók, akiknek emelt szintűnek, de nem korlátlannak kell lenniük, a gépen a rendszergazdai feladatok elvégzéséhez hozzáférést kaphatnak a JEA-végponthoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-106">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="fd406-107">Mivel a JEA lehetővé teszi, hogy ezek a felhasználók teljes rendszergazdai hozzáférés nélkül futtassák a rendszergazdai parancsokat, ezeket a felhasználókat a magas jogosultsági szintű biztonsági csoportokból is eltávolíthatja.</span><span class="sxs-lookup"><span data-stu-id="fd406-107">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="fd406-108">Futtató fiók</span><span class="sxs-lookup"><span data-stu-id="fd406-108">Run-As account</span></span>

<span data-ttu-id="fd406-109">Minden JEA-végpont egy kijelölt **futtató** fiókkal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="fd406-109">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="fd406-110">Ez az a fiók, amely alatt a rendszer végrehajtja a csatlakozó felhasználó műveleteit.</span><span class="sxs-lookup"><span data-stu-id="fd406-110">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="fd406-111">Ez a fiók konfigurálható a [munkamenet konfigurációs fájljában](session-configurations.md), és a választott fiók jelentős hatással van a végpont biztonságára.</span><span class="sxs-lookup"><span data-stu-id="fd406-111">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="fd406-112">A **virtuális fiókok** a **futtató** fiók konfigurálásának ajánlott módja.</span><span class="sxs-lookup"><span data-stu-id="fd406-112">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="fd406-113">A virtuális fiókok egyszeri, ideiglenes helyi fiókok, amelyeket a rendszer a JEA-munkamenet időtartama alatt a csatlakozásra használt felhasználó számára hoz létre.</span><span class="sxs-lookup"><span data-stu-id="fd406-113">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="fd406-114">A munkamenet leállítása után a virtuális fiók megsemmisül, és többé nem használható.</span><span class="sxs-lookup"><span data-stu-id="fd406-114">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="fd406-115">A csatlakozó felhasználó nem ismeri a virtuális fiók hitelesítő adatait.</span><span class="sxs-lookup"><span data-stu-id="fd406-115">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="fd406-116">A virtuális fiók nem használható a rendszer más módon, például Távoli asztal vagy egy nem korlátozott PowerShell-végponton keresztüli eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="fd406-116">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="fd406-117">Alapértelmezés szerint a virtuális fiókok a helyi **rendszergazdák** csoportjába tartoznak a gépen.</span><span class="sxs-lookup"><span data-stu-id="fd406-117">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="fd406-118">Ez teljes körű jogosultságot biztosít a rendszer minden adatának kezeléséhez, de nincs jogosultsága a hálózaton lévő erőforrások felügyeletére.</span><span class="sxs-lookup"><span data-stu-id="fd406-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="fd406-119">Ha más gépekkel végzi a hitelesítést, a felhasználói környezet a helyi számítógépfiók, nem pedig a virtuális fiók.</span><span class="sxs-lookup"><span data-stu-id="fd406-119">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="fd406-120">A tartományvezérlők különleges esetek, mert nincs helyi **rendszergazdák** csoport.</span><span class="sxs-lookup"><span data-stu-id="fd406-120">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="fd406-121">Ehelyett a virtuális fiókok **tartományi rendszergazdákhoz** tartoznak, és felügyelhetik a tartományvezérlőn a címtárszolgáltatások szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="fd406-121">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="fd406-122">A tartományi identitás továbbra is korlátozva van azon a tartományvezérlőn, amelyen a JEA-munkamenet példánya létrejött.</span><span class="sxs-lookup"><span data-stu-id="fd406-122">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="fd406-123">A hálózati hozzáférés úgy tűnik, hogy a tartományvezérlő számítógép-objektumból származik.</span><span class="sxs-lookup"><span data-stu-id="fd406-123">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="fd406-124">Mindkét esetben explicit módon meghatározhatja, hogy mely biztonsági csoportok tartoznak a virtuális fiókhoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-124">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="fd406-125">Ez jó megoldás, ha a feladat helyi vagy tartományi rendszergazdai jogosultságok nélkül is elvégezhető.</span><span class="sxs-lookup"><span data-stu-id="fd406-125">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="fd406-126">Ha már van definiálva biztonsági csoport a rendszergazdák számára, adja meg a virtuális fiók tagságát a csoporthoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-126">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="fd406-127">A virtuális fiókok csoporttagság a munkaállomáson és a tagkiszolgálókon lévő helyi biztonsági csoportokra korlátozódik.</span><span class="sxs-lookup"><span data-stu-id="fd406-127">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="fd406-128">Tartományvezérlőkön a virtuális fiókoknak tartományi biztonsági csoportok tagjainak kell lenniük.</span><span class="sxs-lookup"><span data-stu-id="fd406-128">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="fd406-129">Miután hozzáadta a virtuális fiókot egy vagy több biztonsági csoporthoz, az már nem tartozik az alapértelmezett csoportok közé (helyi vagy tartományi rendszergazdák).</span><span class="sxs-lookup"><span data-stu-id="fd406-129">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="fd406-130">A következő táblázat összefoglalja a lehetséges konfigurációs beállításokat és a virtuális fiókok eredményül kapott engedélyeit:</span><span class="sxs-lookup"><span data-stu-id="fd406-130">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="fd406-131">Számítógép típusa</span><span class="sxs-lookup"><span data-stu-id="fd406-131">Computer type</span></span>         | <span data-ttu-id="fd406-132">Virtuális fiók csoportjának konfigurációja</span><span class="sxs-lookup"><span data-stu-id="fd406-132">Virtual account group configuration</span></span> |                   <span data-ttu-id="fd406-133">Helyi felhasználói környezet</span><span class="sxs-lookup"><span data-stu-id="fd406-133">Local user context</span></span>                    | <span data-ttu-id="fd406-134">Hálózati felhasználói környezet</span><span class="sxs-lookup"><span data-stu-id="fd406-134">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="fd406-135">Tartományvezérlő</span><span class="sxs-lookup"><span data-stu-id="fd406-135">Domain controller</span></span>            | <span data-ttu-id="fd406-136">Alapértelmezett</span><span class="sxs-lookup"><span data-stu-id="fd406-136">Default</span></span>                             | <span data-ttu-id="fd406-137">Tartományi felhasználó, a "*domain*\Domain admins" tagja</span><span class="sxs-lookup"><span data-stu-id="fd406-137">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="fd406-138">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="fd406-138">Computer account</span></span>     |
| <span data-ttu-id="fd406-139">Tartományvezérlő</span><span class="sxs-lookup"><span data-stu-id="fd406-139">Domain controller</span></span>            | <span data-ttu-id="fd406-140">A és B tartományi csoportok</span><span class="sxs-lookup"><span data-stu-id="fd406-140">Domain groups A and B</span></span>               | <span data-ttu-id="fd406-141">Tartományi felhasználó, a "*tartomány*\A", "*domain*\b" tagja</span><span class="sxs-lookup"><span data-stu-id="fd406-141">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="fd406-142">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="fd406-142">Computer account</span></span>     |
| <span data-ttu-id="fd406-143">Tagkiszolgáló vagy munkaállomás</span><span class="sxs-lookup"><span data-stu-id="fd406-143">Member server or workstation</span></span> | <span data-ttu-id="fd406-144">Alapértelmezett</span><span class="sxs-lookup"><span data-stu-id="fd406-144">Default</span></span>                             | <span data-ttu-id="fd406-145">Helyi felhasználó, a "*beépített*\Administrators" tagja</span><span class="sxs-lookup"><span data-stu-id="fd406-145">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="fd406-146">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="fd406-146">Computer account</span></span>     |
| <span data-ttu-id="fd406-147">Tagkiszolgáló vagy munkaállomás</span><span class="sxs-lookup"><span data-stu-id="fd406-147">Member server or workstation</span></span> | <span data-ttu-id="fd406-148">C és D helyi csoportok</span><span class="sxs-lookup"><span data-stu-id="fd406-148">Local groups C and D</span></span>                | <span data-ttu-id="fd406-149">Helyi felhasználó, a "*Computer*\C" és a "*Computer*\D" tagja</span><span class="sxs-lookup"><span data-stu-id="fd406-149">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="fd406-150">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="fd406-150">Computer account</span></span>     |

<span data-ttu-id="fd406-151">Ha megtekinti a biztonsági naplózási eseményeket és az alkalmazás eseménynaplóit, láthatja, hogy minden JEA felhasználói munkamenetben egyedi virtuális fiók található.</span><span class="sxs-lookup"><span data-stu-id="fd406-151">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="fd406-152">Ez az egyedi fiók segít nyomon követni a JEA-végpont felhasználói műveleteit arra az eredeti felhasználóra, aki futtatta a parancsot.</span><span class="sxs-lookup"><span data-stu-id="fd406-152">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="fd406-153">A virtuális fiókok nevei például a `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` következő formátumot követik: ha a **contoso** felhasználója egy JEA-végpontban újraindít egy szolgáltatást, a `WinRM Virtual Users\WinRM_VA_1_contoso_alice`Service Control Manager összes eseményéhez társított Felhasználónév a következő:.</span><span class="sxs-lookup"><span data-stu-id="fd406-153">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="fd406-154">A **csoportosan felügyelt szolgáltatásfiókok (csoportosan felügyelt szolgáltatásfiókokat-EK)** akkor hasznosak, ha egy TAGKISZOLGÁLÓN a JEA-munkamenetben lévő hálózati erőforrásokhoz kell hozzáférnie.</span><span class="sxs-lookup"><span data-stu-id="fd406-154">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="fd406-155">Ha például egy JEA-végpont egy másik gépen üzemeltetett REST API szolgáltatás elérésének vezérlésére szolgál.</span><span class="sxs-lookup"><span data-stu-id="fd406-155">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="fd406-156">Egyszerűen írhat függvényeket a REST API-k meghívásához, de szükség van egy hálózati identitásra az API-val való hitelesítéshez.</span><span class="sxs-lookup"><span data-stu-id="fd406-156">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="fd406-157">A csoportosan felügyelt szolgáltatásfiók használatával a második ugrás lehetséges, és megtarthatja, hogy mely számítógépek használhatják a fiókot.</span><span class="sxs-lookup"><span data-stu-id="fd406-157">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="fd406-158">A gMSA érvényes engedélyeit azok a biztonsági csoportok (helyi vagy tartományi) határozzák meg, amelyekhez a gMSA-fiók tartozik.</span><span class="sxs-lookup"><span data-stu-id="fd406-158">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="fd406-159">Ha egy JEA-végpont gMSA használatára van konfigurálva, úgy tűnik, hogy az összes JEA-felhasználó műveletei ugyanabból a gMSA származnak.</span><span class="sxs-lookup"><span data-stu-id="fd406-159">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="fd406-160">A műveletek egy adott felhasználóhoz való visszakövetésének egyetlen módja a PowerShell-munkamenet átiratában futtatott parancsok meghatározása.</span><span class="sxs-lookup"><span data-stu-id="fd406-160">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="fd406-161">Ha nem ad meg **futtató** fiókot, a rendszer a **pass-Thru hitelesítő adatokat** használja.</span><span class="sxs-lookup"><span data-stu-id="fd406-161">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="fd406-162">A PowerShell a felhasználó hitelesítő adatait használja a parancsok távoli kiszolgálón való futtatásához.</span><span class="sxs-lookup"><span data-stu-id="fd406-162">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="fd406-163">Ehhez az szükséges, hogy a közvetlen csatlakozású felhasználó közvetlenül hozzáférhessen a Kiemelt felügyeleti csoportokhoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-163">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="fd406-164">Ez a konfiguráció **nem** ajánlott a JEA.</span><span class="sxs-lookup"><span data-stu-id="fd406-164">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="fd406-165">Ha a csatlakozó felhasználónak már van rendszergazdai jogosultsága, akkor elkerülhető, hogy a rendszer más, nem korlátozott módon JEA és kezelhesse a rendszerét.</span><span class="sxs-lookup"><span data-stu-id="fd406-165">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="fd406-166">További információkért tekintse meg az alábbi szakaszt a JEA és a [rendszergazdák elleni védelemben](#jea-doesnt-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="fd406-166">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="fd406-167">A **standard szintű futtató fiókok** lehetővé teszik bármely olyan felhasználói fiók megadását, amely alatt a teljes PowerShell-munkamenet fut.</span><span class="sxs-lookup"><span data-stu-id="fd406-167">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="fd406-168">A rögzített **futtató** fiókokat (a `-RunAsCredential` paraméterrel együtt) használó munkamenet-konfigurációk nem JEA-kompatibilisek.</span><span class="sxs-lookup"><span data-stu-id="fd406-168">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="fd406-169">A szerepkör-definíciók már nem a várt módon működnek.</span><span class="sxs-lookup"><span data-stu-id="fd406-169">Role definitions no longer function as expected.</span></span> <span data-ttu-id="fd406-170">Minden, a végponthoz való hozzáférésre jogosult felhasználó ugyanahhoz a szerepkörhöz van rendelve.</span><span class="sxs-lookup"><span data-stu-id="fd406-170">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="fd406-171">Nem használhat **RunAsCredential** egy JEA-végponton, mert nehéz nyomon követni a műveleteket adott felhasználók számára, és nem támogatja a felhasználók szerepkörökhöz rendelését.</span><span class="sxs-lookup"><span data-stu-id="fd406-171">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="fd406-172">WinRM Endpoint ACL</span><span class="sxs-lookup"><span data-stu-id="fd406-172">WinRM Endpoint ACL</span></span>

<span data-ttu-id="fd406-173">Ahogy a PowerShell távelérési végpontokhoz hasonlóan, minden JEA-végponthoz külön hozzáférés-vezérlési lista (ACL) tartozik, amely azt szabályozza, hogy ki végezhet hitelesítést a JEA-végponton.</span><span class="sxs-lookup"><span data-stu-id="fd406-173">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="fd406-174">Ha nincs megfelelően konfigurálva, előfordulhat, hogy a megbízható felhasználók nem férhetnek hozzá a JEA-végponthoz, és előfordulhat, hogy a nem megbízható felhasználók hozzáférhetnek.</span><span class="sxs-lookup"><span data-stu-id="fd406-174">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="fd406-175">A WinRM ACL-je nem befolyásolja a felhasználók JEA-szerepkörökhöz való hozzárendelését.</span><span class="sxs-lookup"><span data-stu-id="fd406-175">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="fd406-176">A leképezést a **RoleDefinitions** mező szabályozza a végpont regisztrálásához használt munkamenet-konfigurációs fájlban.</span><span class="sxs-lookup"><span data-stu-id="fd406-176">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="fd406-177">Alapértelmezés szerint, ha egy JEA-végpont több szerepköri képességgel rendelkezik, a WinRM ACL úgy van konfigurálva, hogy engedélyezze a hozzáférést az összes leképezett felhasználóhoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-177">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="fd406-178">A következő parancsokkal konfigurált JEA-munkamenetek például teljes hozzáférést `CONTOSO\JEA_Lev1` biztosítanak a és `CONTOSO\JEA_Lev2`a szolgáltatáshoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-178">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="fd406-179">A [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) parancsmaggal is naplózhatja a felhasználói engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="fd406-179">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="fd406-180">Ha módosítani szeretné, hogy mely felhasználók férhetnek hozzá `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` , futtassa a parancsot interaktív `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` üzenetként, vagy frissítse az engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="fd406-180">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="fd406-181">A felhasználóknak legalább a JEA-végpont eléréséhez meg kell hívniuk a jogosultságokat.</span><span class="sxs-lookup"><span data-stu-id="fd406-181">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="fd406-182">Létrehozhat egy olyan JEA-végpontot, amely nem rendel hozzá meghatározott szerepkört minden olyan felhasználóhoz, aki hozzáféréssel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="fd406-182">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="fd406-183">Ezek a felhasználók JEA-munkamenetet indíthatnak, de csak az alapértelmezett parancsmagokhoz férhetnek hozzá.</span><span class="sxs-lookup"><span data-stu-id="fd406-183">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="fd406-184">A JEA-végponton futó felhasználói engedélyeket a futtatásával `Get-PSSessionCapability`lehet naplózni.</span><span class="sxs-lookup"><span data-stu-id="fd406-184">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="fd406-185">További információ: [naplózás és jelentéskészítés a JEA-on](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="fd406-185">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="fd406-186">Legalacsonyabb jogosultsági szintű szerepkörök</span><span class="sxs-lookup"><span data-stu-id="fd406-186">Least privilege roles</span></span>

<span data-ttu-id="fd406-187">JEA-szerepkörök tervezésekor fontos megjegyezni, hogy a színfalak mögött futó virtuális és csoportosan felügyelt szolgáltatásfiókok korlátlan hozzáférést biztosíthatnak a helyi géphez.</span><span class="sxs-lookup"><span data-stu-id="fd406-187">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="fd406-188">A JEA szerepkör-funkciók segítenek korlátozni az abban a Kiemelt környezetben futtatható parancsokat és alkalmazásokat.</span><span class="sxs-lookup"><span data-stu-id="fd406-188">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="fd406-189">A nem megfelelően tervezett szerepkörök lehetővé teszik a veszélyes parancsok használatát, amelyek lehetővé tehetik a felhasználók számára a JEA-határok kitörését vagy a bizalmas adatokhoz való hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="fd406-189">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="fd406-190">Vegyük például a következő szerepkör-képesség bejegyzést:</span><span class="sxs-lookup"><span data-stu-id="fd406-190">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="fd406-191">Ez a szerepkör-funkció lehetővé teszi, hogy a felhasználók bármilyen PowerShell -parancsmagot futtassanak a **Microsoft. PowerShell. Management** modul főnévi folyamatával.</span><span class="sxs-lookup"><span data-stu-id="fd406-191">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="fd406-192">Előfordulhat, hogy a felhasználóknak el kell érniük a parancsmagokat `Get-Process` , hogy meglássák, milyen alkalmazások futnak a rendszeren, és `Stop-Process` hogy a nem válaszoló alkalmazásokat öljenek meg.</span><span class="sxs-lookup"><span data-stu-id="fd406-192">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="fd406-193">Ez a bejegyzés azonban lehetővé teszi `Start-Process`, hogy a teljes körű rendszergazdai engedélyekkel elindítson egy tetszőleges programot.</span><span class="sxs-lookup"><span data-stu-id="fd406-193">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="fd406-194">A programot nem kell helyileg telepíteni a rendszeren.</span><span class="sxs-lookup"><span data-stu-id="fd406-194">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="fd406-195">Egy csatlakoztatott felhasználó elindíthat egy programot egy olyan fájlmegosztás segítségével, amely a felhasználó helyi rendszergazdai jogosultságait, kártevőket futtat, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="fd406-195">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="fd406-196">Ennek a szerepkör-képességnek a biztonságosabb verziója az alábbihoz hasonló:</span><span class="sxs-lookup"><span data-stu-id="fd406-196">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="fd406-197">Ne használjon helyettesítő karaktereket a szerepkör-funkciókban.</span><span class="sxs-lookup"><span data-stu-id="fd406-197">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="fd406-198">Győződjön meg arról, hogy rendszeresen naplózza a [hatályos felhasználói engedélyeket](audit-and-report.md#check-effective-rights-for-a-specific-user) , hogy megtudja, mely parancsok férhetnek hozzá a felhasználóhoz.</span><span class="sxs-lookup"><span data-stu-id="fd406-198">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="fd406-199">A JEA nem véd a rendszergazdák ellen</span><span class="sxs-lookup"><span data-stu-id="fd406-199">JEA doesn't protect against admins</span></span>

<span data-ttu-id="fd406-200">A JEA egyik alapvető alapelve, hogy a nem rendszergazdák számára is lehetővé teszi a rendszergazdai feladatok elvégzését.</span><span class="sxs-lookup"><span data-stu-id="fd406-200">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="fd406-201">A JEA nem biztosít védelmet olyan felhasználók ellen, akik már rendelkeznek rendszergazdai jogosultságokkal.</span><span class="sxs-lookup"><span data-stu-id="fd406-201">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="fd406-202">Azok a felhasználók, akik **tartományi rendszergazdák**, helyi **rendszergazdák**vagy más magas jogosultsági szintű csoportokba tartoznak, a JEA védelmét más módon is megkerülhetik.</span><span class="sxs-lookup"><span data-stu-id="fd406-202">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="fd406-203">Bejelentkezhetnek például RDP használatával, távoli MMC-konzolokkal, vagy nem korlátozott PowerShell-végpontokhoz csatlakozhatnak.</span><span class="sxs-lookup"><span data-stu-id="fd406-203">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="fd406-204">Emellett a rendszer helyi rendszergazdái módosíthatják a JEA konfigurációit, hogy további felhasználók számára is engedélyezzék a szerepkört, és hogy a felhasználók milyen hatókört tudjanak kiterjeszteni a JEA-munkamenetben.</span><span class="sxs-lookup"><span data-stu-id="fd406-204">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="fd406-205">Fontos, hogy kiértékelje a JEA-felhasználók kiterjesztett engedélyeit, és ellenőrizze, hogy van-e más mód a rendszerszintű hozzáférés megszerzéséhez.</span><span class="sxs-lookup"><span data-stu-id="fd406-205">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="fd406-206">Az általános gyakorlat az, hogy a JEA-t használja a napi karbantartáshoz, és van egy igény szerinti, privilegizált hozzáférés-kezelési megoldás, amely lehetővé teszi a felhasználók számára, hogy vészhelyzeti helyzetekben átmenetileg helyi rendszergazdák legyenek.</span><span class="sxs-lookup"><span data-stu-id="fd406-206">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="fd406-207">Ezzel biztosíthatja, hogy a felhasználók ne legyenek állandó rendszergazdák a rendszeren, de csak akkor kaphatják meg ezeket a jogosultságokat, ha a és csak akkor, amikor egy munkafolyamatot végeznek az engedélyek használatára.</span><span class="sxs-lookup"><span data-stu-id="fd406-207">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
