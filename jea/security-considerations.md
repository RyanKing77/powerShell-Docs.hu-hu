---
ms.date: 07/10/2019
keywords: a jea, powershell, biztonsági
title: A JEA biztonsági szempontok
ms.openlocfilehash: befc24fec368c4f6d60477daf63bf17e9431133e
ms.sourcegitcommit: 46bebe692689ebedfe65ff2c828fe666b443198d
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/10/2019
ms.locfileid: "67726588"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="c48e7-103">A JEA biztonsági szempontok</span><span class="sxs-lookup"><span data-stu-id="c48e7-103">JEA Security Considerations</span></span>

<span data-ttu-id="c48e7-104">A JEA segítségével javíthatja biztonsági helyzetét a gépeken állandó rendszergazdák számának csökkentésével.</span><span class="sxs-lookup"><span data-stu-id="c48e7-104">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="c48e7-105">A JEA PowerShell munkamenet-konfigurációt használ, hozzon létre egy új belépési pont a felhasználók számára a rendszer kezelését.</span><span class="sxs-lookup"><span data-stu-id="c48e7-105">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="c48e7-106">Felhasználók, akiknek szükség van a felügyeleti feladatokat hajthat végre a gép emelt szintű, de nem korlátlan hozzáférés adható a JEA-végpont elérését.</span><span class="sxs-lookup"><span data-stu-id="c48e7-106">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="c48e7-107">A JEA lehetővé teszi, hogy ezek a felhasználók rendszergazdai parancsok teljes rendszergazdai hozzáférés nélkül futtathat, mivel a magas jogosultsági szintű biztonsági csoportokból majd eltávolíthatja a felhasználók.</span><span class="sxs-lookup"><span data-stu-id="c48e7-107">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="c48e7-108">Futtató fiók</span><span class="sxs-lookup"><span data-stu-id="c48e7-108">Run-As account</span></span>

<span data-ttu-id="c48e7-109">Minden a JEA-végpont tartalmaz egy kijelölt **futtató** fiókot.</span><span class="sxs-lookup"><span data-stu-id="c48e7-109">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="c48e7-110">Ez az a fiók, amely alatt a rendszer végrehajtja a műveleteket a csatlakozó felhasználó.</span><span class="sxs-lookup"><span data-stu-id="c48e7-110">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="c48e7-111">Ez a fiók akkor lehet beállítani a [munkamenet konfigurációs fájl](session-configurations.md), és a választott fiók rendelkezik a jelentős hatással a végpont biztonságát.</span><span class="sxs-lookup"><span data-stu-id="c48e7-111">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="c48e7-112">**A virtuális fiókok** konfigurálásának az ajánlott módszer a **futtató** fiókot.</span><span class="sxs-lookup"><span data-stu-id="c48e7-112">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="c48e7-113">A virtuális fiókok olyan egyszeri, ideiglenes helyi felhasználói fiókok a csatlakozó felhasználó JEA a munkamenet időtartama alatt használni létrehozott.</span><span class="sxs-lookup"><span data-stu-id="c48e7-113">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="c48e7-114">Amint azok a munkamenet meg lett szakítva, a virtuális fiók megsemmisül, és többé nem használható.</span><span class="sxs-lookup"><span data-stu-id="c48e7-114">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="c48e7-115">A kapcsolódó felhasználó nem ismeri a virtuális fiók hitelesítő adatait.</span><span class="sxs-lookup"><span data-stu-id="c48e7-115">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="c48e7-116">A virtuális fiók nem használható a rendszer keresztül más módon, például a távoli asztal és a egy korlátozás PowerShell-végpont elérésére.</span><span class="sxs-lookup"><span data-stu-id="c48e7-116">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="c48e7-117">Alapértelmezés szerint a virtuális fiókok tartoznak a helyi **rendszergazdák** csoport a számítógépen.</span><span class="sxs-lookup"><span data-stu-id="c48e7-117">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="c48e7-118">Ezáltal őket teljes jogosultságokkal kezelése semmit, a rendszer, de nincs jogosultsága a hálózaton lévő erőforrások kezelésére.</span><span class="sxs-lookup"><span data-stu-id="c48e7-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="c48e7-119">Más gépekkel hitelesítésekor a felhasználói környezetet, hogy a helyi számítógépfiók, nem a virtuális fiók.</span><span class="sxs-lookup"><span data-stu-id="c48e7-119">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="c48e7-120">Tartományvezérlő el egy különleges esetben, mivel nincs helyi **rendszergazdák** csoport.</span><span class="sxs-lookup"><span data-stu-id="c48e7-120">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="c48e7-121">Ehelyett a virtuális fiókok tartoznak **Tartománygazdák** és felügyelheti a tartományvezérlő a címtárszolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="c48e7-121">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="c48e7-122">A tartomány identitás továbbra is használatra korlátozva a tartományvezérlőn, ahol a JEA-munkamenet példányosítása volt.</span><span class="sxs-lookup"><span data-stu-id="c48e7-122">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="c48e7-123">Bármely hálózati hozzáférés úgy tűnik, hogy a tartományvezérlő számítógép-objektumot inkább származnak.</span><span class="sxs-lookup"><span data-stu-id="c48e7-123">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="c48e7-124">Mindkét esetben előfordulhat, hogy explicit módon meghatározni melyik biztonsági csoportok, a virtuális fiók tartozik.</span><span class="sxs-lookup"><span data-stu-id="c48e7-124">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="c48e7-125">Ez akkor célszerű, ha a helyi vagy tartományi rendszergazdai jogosultságok nélkül a feladat elvégezhető.</span><span class="sxs-lookup"><span data-stu-id="c48e7-125">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="c48e7-126">Ha már rendelkezik a rendszergazdák számára meghatározott biztonsági csoport, adja meg a virtuális fiók tagság ehhez a csoporthoz.</span><span class="sxs-lookup"><span data-stu-id="c48e7-126">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="c48e7-127">Virtuális fiók csoporttagság helyi biztonsági csoportokat a munkaállomáson és a tagkiszolgálók korlátozódik.</span><span class="sxs-lookup"><span data-stu-id="c48e7-127">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="c48e7-128">A tartományvezérlőkön a virtuális fiókok tartományi biztonsági csoportok tagjának kell lennie.</span><span class="sxs-lookup"><span data-stu-id="c48e7-128">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="c48e7-129">Miután a virtuális fiók van adva egy vagy több biztonsági csoportot, már nem tartozik alapértelmezett csoportok (helyi vagy tartományi rendszergazdák).</span><span class="sxs-lookup"><span data-stu-id="c48e7-129">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="c48e7-130">A következő táblázat összefoglalja a lehetséges konfigurációs beállításokat és az eredményül kapott virtuális fiókok engedélyeit:</span><span class="sxs-lookup"><span data-stu-id="c48e7-130">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="c48e7-131">Számítógép típusa</span><span class="sxs-lookup"><span data-stu-id="c48e7-131">Computer type</span></span>         | <span data-ttu-id="c48e7-132">Virtuális fiók csoport konfigurálása</span><span class="sxs-lookup"><span data-stu-id="c48e7-132">Virtual account group configuration</span></span> |                   <span data-ttu-id="c48e7-133">Helyi felhasználói környezet</span><span class="sxs-lookup"><span data-stu-id="c48e7-133">Local user context</span></span>                    | <span data-ttu-id="c48e7-134">Hálózati felhasználói környezet</span><span class="sxs-lookup"><span data-stu-id="c48e7-134">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="c48e7-135">Tartományvezérlő</span><span class="sxs-lookup"><span data-stu-id="c48e7-135">Domain controller</span></span>            | <span data-ttu-id="c48e7-136">Alapértelmezett</span><span class="sxs-lookup"><span data-stu-id="c48e7-136">Default</span></span>                             | <span data-ttu-id="c48e7-137">Tartományi felhasználó, tagja "*tartomány*\Domain rendszergazdák</span><span class="sxs-lookup"><span data-stu-id="c48e7-137">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="c48e7-138">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="c48e7-138">Computer account</span></span>     |
| <span data-ttu-id="c48e7-139">Tartományvezérlő</span><span class="sxs-lookup"><span data-stu-id="c48e7-139">Domain controller</span></span>            | <span data-ttu-id="c48e7-140">A és B tartományi csoportok</span><span class="sxs-lookup"><span data-stu-id="c48e7-140">Domain groups A and B</span></span>               | <span data-ttu-id="c48e7-141">Tartományi felhasználó, tagja "*tartomány*\A ','*tartomány*\B"</span><span class="sxs-lookup"><span data-stu-id="c48e7-141">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="c48e7-142">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="c48e7-142">Computer account</span></span>     |
| <span data-ttu-id="c48e7-143">Tagkiszolgáló vagy munkaállomás</span><span class="sxs-lookup"><span data-stu-id="c48e7-143">Member server or workstation</span></span> | <span data-ttu-id="c48e7-144">Alapértelmezett</span><span class="sxs-lookup"><span data-stu-id="c48e7-144">Default</span></span>                             | <span data-ttu-id="c48e7-145">Helyi felhasználói, tagja "*beépített*\Administrators'</span><span class="sxs-lookup"><span data-stu-id="c48e7-145">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="c48e7-146">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="c48e7-146">Computer account</span></span>     |
| <span data-ttu-id="c48e7-147">Tagkiszolgáló vagy munkaállomás</span><span class="sxs-lookup"><span data-stu-id="c48e7-147">Member server or workstation</span></span> | <span data-ttu-id="c48e7-148">C és a D helyi csoportok</span><span class="sxs-lookup"><span data-stu-id="c48e7-148">Local groups C and D</span></span>                | <span data-ttu-id="c48e7-149">Helyi felhasználói, tagja "*számítógép*\C" és "*számítógép*\D"</span><span class="sxs-lookup"><span data-stu-id="c48e7-149">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="c48e7-150">Számítógépfiók</span><span class="sxs-lookup"><span data-stu-id="c48e7-150">Computer account</span></span>     |

<span data-ttu-id="c48e7-151">Ha biztonsági naplózási eseményeket és a alkalmazás eseménynaplóit, láthatja, hogy minden egyes JEA felhasználói munkamenet egy egyedi virtuális fiók rendelkezik-e.</span><span class="sxs-lookup"><span data-stu-id="c48e7-151">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="c48e7-152">Ez a fiók egyedi segítségével nyomon követheti a JEA-végpont felhasználói műveletek térjen vissza az eredeti felhasználó, aki a parancsot futtatta.</span><span class="sxs-lookup"><span data-stu-id="c48e7-152">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="c48e7-153">Virtuális fiók neve követi a `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` például, ha felhasználói **Alice** tartományban **Contoso** újraindítja a szolgáltatást a JEA-végpont, a bármely szolgáltatásvezérlő társított felhasználónevet események lenne `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span><span class="sxs-lookup"><span data-stu-id="c48e7-153">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="c48e7-154">**Csoportosan felügyelt szolgáltatásfiókok (csoportosan felügyelt szolgáltatásfiókokat)** akkor hasznos, ha egy tagkiszolgálóra hozzáféréssel kell rendelkeznie a hálózati erőforrásokhoz a JEA-munkamenetben.</span><span class="sxs-lookup"><span data-stu-id="c48e7-154">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="c48e7-155">Ha például a JEA-végpont használatakor egy másik gépen futó REST API-szolgáltatásban való hozzáférés szabályozásához.</span><span class="sxs-lookup"><span data-stu-id="c48e7-155">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="c48e7-156">Egyszerűen írhat olyan funkciók, a REST API-k meghívásához, de egy hálózati azonosságát az API-hitelesítésre van szüksége.</span><span class="sxs-lookup"><span data-stu-id="c48e7-156">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="c48e7-157">Csoportosan felügyelt szolgáltatásfiók használata lehetővé teszi, a második Ugrás irányítást, amelyen számítógépek fiókot is használhatja.</span><span class="sxs-lookup"><span data-stu-id="c48e7-157">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="c48e7-158">A csoportosan felügyelt szolgáltatásfiókot, a hatályos engedélyek határozzák meg a biztonsági csoportok (helyi vagy tartományi), amelyhez a csoportosan felügyelt szolgáltatásfiók tartozik.</span><span class="sxs-lookup"><span data-stu-id="c48e7-158">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="c48e7-159">A JEA-végpont csoportosan felügyelt szolgáltatásfiók használatára van konfigurálva, amikor minden JEA felhasználók műveleteinek úgy tűnik, hogy az azonos gMSA származnak.</span><span class="sxs-lookup"><span data-stu-id="c48e7-159">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="c48e7-160">Vissza a megadott felhasználó követési műveleteket csak úgy, hogy azonosítsa azokat a parancsokat futtatni egy PowerShell-munkamenet átiratot.</span><span class="sxs-lookup"><span data-stu-id="c48e7-160">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="c48e7-161">**Hitelesítő adatok pass-** akkor használjuk, ha nem ad meg egy **futtató** fiókot.</span><span class="sxs-lookup"><span data-stu-id="c48e7-161">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="c48e7-162">PowerShell-parancsok futtatásához a távoli kiszolgálón a csatlakozó felhasználó hitelesítő adatait használja.</span><span class="sxs-lookup"><span data-stu-id="c48e7-162">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="c48e7-163">Ez megköveteli, hogy a csatlakozó felhasználó közvetlen hozzáférést biztosítson a kiemelt jogosultságú felügyeleti csoportokhoz.</span><span class="sxs-lookup"><span data-stu-id="c48e7-163">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="c48e7-164">Ez a konfiguráció **nem** JEA ajánlott.</span><span class="sxs-lookup"><span data-stu-id="c48e7-164">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="c48e7-165">Ha a kapcsolódó felhasználó már rendelkezik rendszergazdai jogosultságokkal, JEA elkerülése érdekében, és kezelheti keresztül más, korlátozás azt jelenti, hogy a rendszer.</span><span class="sxs-lookup"><span data-stu-id="c48e7-165">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="c48e7-166">További információkért tekintse meg az alábbi hogyan [JEA rendszergazdák ellen védelmet biztosító nem](#jea-doesnt-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="c48e7-166">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="c48e7-167">**Standard szintű Futtatás mint fiók** meg lehet adni egy felhasználói fiókot, amely alatt a teljes PowerShell-munkamenetben futtatja.</span><span class="sxs-lookup"><span data-stu-id="c48e7-167">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="c48e7-168">Munkamenet-konfigurációk használatával rögzített **futtató** fiókok (az a `-RunAsCredential` paraméter) nem a JEA-t támogató.</span><span class="sxs-lookup"><span data-stu-id="c48e7-168">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="c48e7-169">Szerepkör-definíciók nem várt módon működik.</span><span class="sxs-lookup"><span data-stu-id="c48e7-169">Role definitions no longer function as expected.</span></span> <span data-ttu-id="c48e7-170">Minden felhasználó jogosult a végpont elérésére ugyanarra a szerepkörre van hozzárendelve.</span><span class="sxs-lookup"><span data-stu-id="c48e7-170">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="c48e7-171">Ne használja a **RunAsCredential** a JEA-végpont mert nehéz nyomkövetési műveletek vissza az adott felhasználókat, és hiányzik támogatása felhasználók leképezése szerepkörök.</span><span class="sxs-lookup"><span data-stu-id="c48e7-171">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="c48e7-172">WinRM Endpoint ACL</span><span class="sxs-lookup"><span data-stu-id="c48e7-172">WinRM Endpoint ACL</span></span>

<span data-ttu-id="c48e7-173">PowerShell távoli eljáráshívás végpontokkal rendszeres, minden a JEA-végpont rendelkezik egy külön hozzáférés-vezérlési lista (ACL), amely szabályozza, akik hitelesítheti a JEA-végponttal.</span><span class="sxs-lookup"><span data-stu-id="c48e7-173">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="c48e7-174">Ha nem megfelelően konfigurált, megbízható felhasználók nem lehet tudni hozzáférni a JEA-végpont, és nem megbízható felhasználók rendelkezhetnek hozzáféréssel.</span><span class="sxs-lookup"><span data-stu-id="c48e7-174">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="c48e7-175">A WinRM ACL nem befolyásolja a felhasználók szerepkörökhöz JEA leképezés.</span><span class="sxs-lookup"><span data-stu-id="c48e7-175">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="c48e7-176">Leképezés vezérli a **RoleDefinitions** mező a munkamenet-konfigurációs fájlban használt végpont.</span><span class="sxs-lookup"><span data-stu-id="c48e7-176">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="c48e7-177">Alapértelmezés szerint a JEA-végpont rendelkezik több szerepkör-szolgáltatásait, amikor a Rendszerfelügyeleti webszolgáltatások ACL van konfigurálva az összes hozzárendelt felhasználók férhessenek hozzá.</span><span class="sxs-lookup"><span data-stu-id="c48e7-177">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="c48e7-178">Ha például konfigurált, a következő parancsokkal JEA munkamenet teljes hozzáférést biztosít `CONTOSO\JEA_Lev1` és `CONTOSO\JEA_Lev2`.</span><span class="sxs-lookup"><span data-stu-id="c48e7-178">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="c48e7-179">A felhasználói engedélyek naplózhatók a [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) parancsmagot.</span><span class="sxs-lookup"><span data-stu-id="c48e7-179">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="c48e7-180">Szeretné módosítani, hogy mely felhasználók férhessenek, futtathatja az alábbiak `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` számára egy interaktív kérdés vagy `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` engedélyeinek frissítését.</span><span class="sxs-lookup"><span data-stu-id="c48e7-180">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="c48e7-181">A felhasználóknak kell legalább *Invoke* jogok a JEA-végpont elérésére.</span><span class="sxs-lookup"><span data-stu-id="c48e7-181">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="c48e7-182">Akkor lehet, amely nem egy meghatározott szerepkör hozzárendelése minden hozzáféréssel rendelkező felhasználó JEA-végpont létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="c48e7-182">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="c48e7-183">Ezek a felhasználók JEA munkamenetet, de csak az alapértelmezett parancsmagok hozzáférése.</span><span class="sxs-lookup"><span data-stu-id="c48e7-183">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="c48e7-184">A JEA-végpont a felhasználói engedélyek naplózhatók futtatásával `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="c48e7-184">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="c48e7-185">További információkért lásd: [naplózás és a JEA-jelentések](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="c48e7-185">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="c48e7-186">Legkisebb jogosultság szerepkörök</span><span class="sxs-lookup"><span data-stu-id="c48e7-186">Least privilege roles</span></span>

<span data-ttu-id="c48e7-187">JEA szerepkörök tervezésekor fontos megjegyezni, hogy a háttérben futó virtuális és a csoportosan felügyelt szolgáltatásfiókokat is ugyanolyan korlátlan hozzáféréssel rendelkezik a helyi gépen.</span><span class="sxs-lookup"><span data-stu-id="c48e7-187">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="c48e7-188">A JEA szerepköri funkciók segítségével korlátozhatja a parancsok és a kiemelt jogosultságú környezetben futó alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="c48e7-188">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="c48e7-189">Nem megfelelően kialakított szerepköröket lehetővé tehetik a veszélyes parancsok, amelyek lehetővé tehetik a JEA határain kívül break, vagy bizalmas információk elérését.</span><span class="sxs-lookup"><span data-stu-id="c48e7-189">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="c48e7-190">Vegyük példaként a következő szerepkör-képesség bejegyzés:</span><span class="sxs-lookup"><span data-stu-id="c48e7-190">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="c48e7-191">Ez a szerepkör funkció lehetővé teszi a felhasználóknak minden olyan PowerShell-parancsmag futtatásához a főnév **folyamat** származó a **Microsoft.PowerShell.Management** modul.</span><span class="sxs-lookup"><span data-stu-id="c48e7-191">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="c48e7-192">Felhasználók valószínűleg eléréséhez, például a parancsmagok `Get-Process` megtekintheti, milyen alkalmazások vannak a rendszeren futó és `Stop-Process` le alkalmazásokat, amelyek nem válaszol.</span><span class="sxs-lookup"><span data-stu-id="c48e7-192">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="c48e7-193">Azonban ez a bejegyzés is lehetővé teszi, hogy `Start-Process`, teljes körű rendszergazda engedélyekkel rendelkező egy tetszőleges program elindításához használható.</span><span class="sxs-lookup"><span data-stu-id="c48e7-193">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="c48e7-194">A program nem szükséges, a rendszer helyben telepítendő.</span><span class="sxs-lookup"><span data-stu-id="c48e7-194">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="c48e7-195">Egy csatlakoztatott felhasználói indítható egy programot, amely lehetővé teszi a felhasználó helyi rendszergazdai jogosultságokat, futtatja a kártevők és más fájlmegosztásból.</span><span class="sxs-lookup"><span data-stu-id="c48e7-195">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="c48e7-196">A szerepkör funkció biztonságosabb verziója hasonlóan néz ki:</span><span class="sxs-lookup"><span data-stu-id="c48e7-196">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="c48e7-197">Kerülje a helyettesítő karakterek használatával a szerepkörrel képességeket.</span><span class="sxs-lookup"><span data-stu-id="c48e7-197">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="c48e7-198">Ügyeljen arra, hogy rendszeresen [hatékony felhasználói engedélyek naplózási](audit-and-report.md#check-effective-rights-for-a-specific-user) tudni, mely parancsok a felhasználó számára elérhető.</span><span class="sxs-lookup"><span data-stu-id="c48e7-198">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="c48e7-199">Jea-t nem védi a rendszergazdák ellen</span><span class="sxs-lookup"><span data-stu-id="c48e7-199">JEA doesn't protect against admins</span></span>

<span data-ttu-id="c48e7-200">A JEA core alapelveit egyike, hogy lehetővé teszi bizonyos felügyeleti feladatokat hajthat végre, nem rendszergazda.</span><span class="sxs-lookup"><span data-stu-id="c48e7-200">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="c48e7-201">Jea-t rendszergazdai jogosultsággal rendelkező felhasználók nem ellen.</span><span class="sxs-lookup"><span data-stu-id="c48e7-201">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="c48e7-202">Felhasználók, akik tartoznak **Tartománygazdák**, helyi **rendszergazdák**, vagy egyéb magas jogosultsági szintű csoportok megkerülheti a JEA a védelmet egy másik eszközzel.</span><span class="sxs-lookup"><span data-stu-id="c48e7-202">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="c48e7-203">Például ezek sikerült RDP, távoli MMC-konzolt használja, vagy bejelentkeznie korlátozás PowerShell végpontok csatlakozni.</span><span class="sxs-lookup"><span data-stu-id="c48e7-203">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="c48e7-204">Emellett a rendszer a helyi rendszergazdák módosíthatja a további felhasználók, vagy módosítani a szerepkör képes kiterjeszteni a felhasználók mit tehetnek a JEA-munkamenetet a JEA-konfigurációk.</span><span class="sxs-lookup"><span data-stu-id="c48e7-204">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="c48e7-205">Fontos a JEA-felhasználók kiterjesztett engedéllyel vannak-e a rendszer az emelt szintű hozzáférés más módon kiértékeléséhez.</span><span class="sxs-lookup"><span data-stu-id="c48e7-205">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="c48e7-206">Általános gyakorlat, hogy rendszeres napi karbantartás jea-t használnak, és a just-in-time, emelt szintű hozzáférés-kezelési megoldása, amely lehetővé teszi a felhasználóknak ideiglenesen a helyi rendszergazdák vészhelyzet válnak.</span><span class="sxs-lookup"><span data-stu-id="c48e7-206">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="c48e7-207">Ezzel biztosíthatja a felhasználók nincsenek állandó rendszergazdák, a rendszer, de ezeket a jogokat kaphat, ha, és csak akkor végezze el egy munkafolyamatot, amely a dokumentumok használata során ezeket az engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="c48e7-207">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
