---
title: Erőforrások hozzáadása egy felügyeleti OData Web Service |} A Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e620bf6d-76be-47b0-a7a8-f43418f30c60
caps.latest.revision: 6
ms.openlocfilehash: b81a32b867795ae51c3f5308c2f82c31ed2747fa
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/03/2019
ms.locfileid: "56848467"
---
# <a name="adding-resources-to-a-management-odata-web-service"></a><span data-ttu-id="f643d-102">Erőforrások hozzáadása egy Management OData webszolgáltatáshoz</span><span class="sxs-lookup"><span data-stu-id="f643d-102">Adding Resources to a Management OData Web Service</span></span>

<span data-ttu-id="f643d-103">Ez a példa bemutatja, hogyan-erőforrás hozzáadása egy meglévő felügyeleti OData web Service a Management OData séma Tervező használatával.</span><span class="sxs-lookup"><span data-stu-id="f643d-103">This example demonstrates how to add a resource to an existing Management OData web service by using the Management OData Schema Designer.</span></span> <span data-ttu-id="f643d-104">A [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) minta létrehoz egy webszolgáltatás, amely elérhetővé teszi a folyamat és a kiszolgáló erőforrásait.</span><span class="sxs-lookup"><span data-stu-id="f643d-104">The [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample creates a web service that exposes the Process and Server resources.</span></span> <span data-ttu-id="f643d-105">Ebben a példában egy virtuális gép (VM) erőforrás adnak hozzá a web service.</span><span class="sxs-lookup"><span data-stu-id="f643d-105">In this example, you will add a Virtual Machine (VM) resource to the web service.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f643d-106">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="f643d-106">Prerequisites</span></span>

<span data-ttu-id="f643d-107">Ez a témakör feltételezi, hogy letöltötte és telepítette a [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) leírtak szerint minta [egy Windows PowerShell webszolgáltatás létrehozása](./creating-a-management-odata-web-service.md), illetve, hogy letöltötte és telepítette a [Management OData-séma Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span><span class="sxs-lookup"><span data-stu-id="f643d-107">This topic assumes that you have downloaded and installed the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample as described in [Creating a Windows PowerShell Web Service](./creating-a-management-odata-web-service.md), and that you have downloaded and installed the [Management OData Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span></span> <span data-ttu-id="f643d-108">Ez a témakör azt is feltételezi, hogy a Hyper-V Windows PowerShell-modul telepítve azon a számítógépen, ahol beállíthatja a felügyeleti Odata-végpont.</span><span class="sxs-lookup"><span data-stu-id="f643d-108">This topic also assumes that you have the Hyper-V Windows PowerShell module installed on the computer where you set up the Management Odata endpoint.</span></span>

## <a name="adding-vm-as-a-resource-to-the-web-service"></a><span data-ttu-id="f643d-109">A Web Service erőforrás-alapú virtuális gép hozzáadása</span><span class="sxs-lookup"><span data-stu-id="f643d-109">Adding VM as a Resource to the Web Service</span></span>

<span data-ttu-id="f643d-110">Az első lépés, hogy a meglévő felügyeleti OData-végpont a séma importálása a séma-Tervező.</span><span class="sxs-lookup"><span data-stu-id="f643d-110">The first step is to import the schema from the existing Management OData endpoint into the schema designer.</span></span> <span data-ttu-id="f643d-111">A következő eljárás azt ismerteti, hogyan valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-111">The following procedure describes how to do that.</span></span>

#### <a name="importing-an-existing-schema-into-the-schema-designer"></a><span data-ttu-id="f643d-112">Egy meglévő sémák importálása a séma-Tervező</span><span class="sxs-lookup"><span data-stu-id="f643d-112">Importing an existing schema into the schema designer</span></span>

1. <span data-ttu-id="f643d-113">Nyissa meg a felügyeleti OData-séma Tervező.</span><span class="sxs-lookup"><span data-stu-id="f643d-113">Open the Management OData Schema Designer.</span></span>

2. <span data-ttu-id="f643d-114">Az a **fájl** menüjében válassza **fájl** ; **Új** ; **Fájl**.</span><span class="sxs-lookup"><span data-stu-id="f643d-114">From the **File** menu, select **File** ; **New** ; **File**.</span></span> <span data-ttu-id="f643d-115">A **új fájl** párbeszédpanel jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-115">The **New File** dialog appears.</span></span>

3. <span data-ttu-id="f643d-116">Kattintson a **Management OData-modellen**, és kattintson a **nyílt**.</span><span class="sxs-lookup"><span data-stu-id="f643d-116">Click **Management OData Model**, and then click **Open**.</span></span>

4. <span data-ttu-id="f643d-117">A fő ablakban kattintson a jobb gombbal, és kattintson a **sémafájl** ; **Importálás**.</span><span class="sxs-lookup"><span data-stu-id="f643d-117">Right-click in the main window, and click **Schema file** ; **Import**.</span></span> <span data-ttu-id="f643d-118">A **nyílt** párbeszédpanel jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-118">The **Open** dialog appears.</span></span>

5. <span data-ttu-id="f643d-119">Lépjen abba a mappába, ahol beállíthatja a felügyeleti OData webszolgáltatást a [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) minta.</span><span class="sxs-lookup"><span data-stu-id="f643d-119">Navigate to the folder where you set up the Management OData web service for the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample.</span></span> <span data-ttu-id="f643d-120">A megadott minta Windows PowerShell-parancsfájl segítségével állítsa be a végpont a parancsfájl módosítása nélkül, ha a mappa a következő **C:\inetpub\wwwroot\Modata**.</span><span class="sxs-lookup"><span data-stu-id="f643d-120">If you used the Windows PowerShell script provided with that sample to set up the endpoint without modifying the script, that folder is **C:\inetpub\wwwroot\Modata**.</span></span> <span data-ttu-id="f643d-121">Válassza ki a Schema.mof, és kattintson a **nyílt**.</span><span class="sxs-lookup"><span data-stu-id="f643d-121">Select Schema.mof, and click **Open**.</span></span>

   <span data-ttu-id="f643d-122">Ezen a ponton a Schema.mof és Schema.xml fájlok megnyitásához egy szövegszerkesztőben, és figyelje meg, hogy tartalmaznak-e a folyamat és a szolgáltatási erőforrások leképezéseit.</span><span class="sxs-lookup"><span data-stu-id="f643d-122">At this point, open the Schema.mof and Schema.xml files in a text editor, and notice that they contain mappings for the Process and Service resources.</span></span> <span data-ttu-id="f643d-123">A Schema.mof fájlja [Distributed Management Task Force](https://www.dmtf.org/) (DTMF) felügyelt objektum (MOF) standard.</span><span class="sxs-lookup"><span data-stu-id="f643d-123">The Schema.mof file uses [Distributed Management  Task Force](https://www.dmtf.org/) (DTMF) Managed Object (MOF) standard.</span></span> <span data-ttu-id="f643d-124">A schema.xml fájlja egy XML-séma leírt [erőforrás-leképezés séma](./resource-mapping-schema.md).</span><span class="sxs-lookup"><span data-stu-id="f643d-124">The schema.xml file uses an XML schema that is described in [Resource Mapping Schema](./resource-mapping-schema.md).</span></span>

   <span data-ttu-id="f643d-125">Az alábbi eljárás ismerteti, hogyan lehet importálni a Hyper-V parancsmagok a a séma modellre.</span><span class="sxs-lookup"><span data-stu-id="f643d-125">The following procedure describes how to import Hyper-V cmdlets in to the schema model.</span></span>

#### <a name="importing-cmdlets-into-the-schema"></a><span data-ttu-id="f643d-126">A séma importálása a parancsmagok</span><span class="sxs-lookup"><span data-stu-id="f643d-126">Importing cmdlets into the schema</span></span>

1. <span data-ttu-id="f643d-127">Kattintson a jobb gombbal egy üres területre a séma-Tervező ablakában, és kattintson a **Import parancsmagok**.</span><span class="sxs-lookup"><span data-stu-id="f643d-127">Right-click on a blank area of the schema designer window, and click **Import Cmdlets**.</span></span> <span data-ttu-id="f643d-128">A **parancsmag importálása varázsló** párbeszédpanel jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-128">The **Cmdlet Import Wizard** dialog appears.</span></span>

2. <span data-ttu-id="f643d-129">Győződjön meg arról, hogy **helyi számítógép** van jelölve, és kattintson a **tovább**.</span><span class="sxs-lookup"><span data-stu-id="f643d-129">Make sure **Local Computer** is selected, and click **Next**.</span></span>

3. <span data-ttu-id="f643d-130">Győződjön meg arról, hogy a Windows PowerShell-modul telepítve van-e kiválasztva, és a legördülő listából válassza ki a Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="f643d-130">Make sure that Installed Windows PowerShell Modules is selected, and select Hyper-V from the drop-down list.</span></span> <span data-ttu-id="f643d-131">Kattintson a **tovább**.</span><span class="sxs-lookup"><span data-stu-id="f643d-131">click **Next**.</span></span> <span data-ttu-id="f643d-132">Kattintson a **Tovább** gombra.</span><span class="sxs-lookup"><span data-stu-id="f643d-132">Click **Next**.</span></span>

4. <span data-ttu-id="f643d-133">Az a **parancsmag főnév** listáról válassza ki **VM**.</span><span class="sxs-lookup"><span data-stu-id="f643d-133">In the **Cmdlet Noun** list, select **VM**.</span></span> <span data-ttu-id="f643d-134">Kattintson a **Next** (Tovább) gombra.</span><span class="sxs-lookup"><span data-stu-id="f643d-134">Click **Next**</span></span>

5. <span data-ttu-id="f643d-135">Ebben a példában azt csak a Get és Delete parancsok parancsmagokban fog kötődni.</span><span class="sxs-lookup"><span data-stu-id="f643d-135">For this example, we will bind only the Get and Delete commands with cmdlets.</span></span> <span data-ttu-id="f643d-136">Törölje a **létrehozása** és **frissítés** jelölőnégyzeteket, és győződjön meg arról, a **első** és **törlése** jelölőnégyzetek be vannak jelölve.</span><span class="sxs-lookup"><span data-stu-id="f643d-136">Clear the **CREATE** and **UPDATE** checkboxes, and make sure the **GET** and **DELETE** checkboxes are checked.</span></span> <span data-ttu-id="f643d-137">Győződjön meg arról, hogy a `Get-VM` parancsmag van kiválasztva a **első**, és a `Remove-VM` parancsmag van kiválasztva a **törlése**.</span><span class="sxs-lookup"><span data-stu-id="f643d-137">Make sure that the `Get-VM` cmdlet is selected for **GET**, and the `Remove-VM` cmdlet is selected for **DELETE**.</span></span>

6. <span data-ttu-id="f643d-138">A virtuális gépeket kezelő parancsmagokat metaadatait nem határoz meg egy kimeneti típus, mert szüksége lesz a adja meg a kimeneti típus a parancsmag futtatásával.</span><span class="sxs-lookup"><span data-stu-id="f643d-138">Because the metadata for the VM cmdlets does not specify an output type, you will need to run the cmdlet to specify the output type.</span></span> <span data-ttu-id="f643d-139">Válassza ki **adja meg a kimeneti típus** kattintson **parancsmag futtatásával**.</span><span class="sxs-lookup"><span data-stu-id="f643d-139">Select **Provide output type** and click **Run cmdlet**.</span></span> <span data-ttu-id="f643d-140">A **parancsmag futtatása** párbeszédpanel jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-140">The **Run Cmdlet** dialog appears.</span></span> <span data-ttu-id="f643d-141">Kattintson a **Run** (Futtatás) parancsra.</span><span class="sxs-lookup"><span data-stu-id="f643d-141">Click **Run**.</span></span> <span data-ttu-id="f643d-142">A **CLR-beli típus** mezőt a rendszer kitölti a `VirtualMachine` típusa.</span><span class="sxs-lookup"><span data-stu-id="f643d-142">The **CLR Type** box is populated with the `VirtualMachine` type.</span></span> <span data-ttu-id="f643d-143">Kattintson a **OK**, majd kattintson a **tovább**.</span><span class="sxs-lookup"><span data-stu-id="f643d-143">Click **OK**, then click **Next**.</span></span>

7. <span data-ttu-id="f643d-144">Alapértelmezés szerint minden VirtualMachine objektum tulajdonságainak van jelölve.</span><span class="sxs-lookup"><span data-stu-id="f643d-144">By default, all of the properties of the VirtualMachine object are selected.</span></span> <span data-ttu-id="f643d-145">Minden tulajdonság nem szeretné az adatokat adja vissza, ha az erőforrás kérhet a webszolgáltatás részeként, törölheti.</span><span class="sxs-lookup"><span data-stu-id="f643d-145">You can clear any properties that you do not want as part of the data returned when you request this resource from the web service.</span></span> <span data-ttu-id="f643d-146">Kattintson a **Tovább** gombra.</span><span class="sxs-lookup"><span data-stu-id="f643d-146">Click **Next**.</span></span>

8. <span data-ttu-id="f643d-147">Ki kell választania legalább egy tulajdonságot kulcsként használni.</span><span class="sxs-lookup"><span data-stu-id="f643d-147">You must select at least one property to be used as a key.</span></span> <span data-ttu-id="f643d-148">Válassza ki **neve** a listából, és kattintson a **tovább**.</span><span class="sxs-lookup"><span data-stu-id="f643d-148">Select **Name** in the list, and click **Next**.</span></span>

9. <span data-ttu-id="f643d-149">A következő időszakban lehetővé teszi, hogy a felügyeleti OData-erőforrás tulajdonságainak leképezheti az alapul szolgáló parancsmagok tulajdonságait.</span><span class="sxs-lookup"><span data-stu-id="f643d-149">The next window allows you to map properties of the Management OData resource to properties of the underlying cmdlets.</span></span> <span data-ttu-id="f643d-150">A varázsló azonos tulajdonságai leképez alapértelmezés szerint.</span><span class="sxs-lookup"><span data-stu-id="f643d-150">The wizard maps properties with identical names by default.</span></span> <span data-ttu-id="f643d-151">Ha például a `ComputerName` tulajdonság az erőforrás le van képezve a `ComputerName` tulajdonság a parancsmagok.</span><span class="sxs-lookup"><span data-stu-id="f643d-151">For example, the `ComputerName` property of the resource is mapped to the `ComputerName` property of the cmdlets.</span></span>  <span data-ttu-id="f643d-152">Ez lehetővé teszi, hogy adja meg a `ComputerName` egy kérés a webszolgáltatást, és a megadott értéket kell átadni a `Get-VM` parancsmag.</span><span class="sxs-lookup"><span data-stu-id="f643d-152">This allows you to specify the `ComputerName` property in a request to the web service, and have the value you specify be passed to the `Get-VM` cmdlet.</span></span> <span data-ttu-id="f643d-153">`Id` és `Name` vannak leképezve, alapértelmezés szerint is.</span><span class="sxs-lookup"><span data-stu-id="f643d-153">`Id` and `Name` are also mapped by default.</span></span>

   10. <span data-ttu-id="f643d-154">Kattintson a **tovább**, majd kattintson a **Befejezés**.</span><span class="sxs-lookup"><span data-stu-id="f643d-154">Click **Next**, then click **Finish**.</span></span>

       <span data-ttu-id="f643d-155">A VM-erőforrás most már a séma-Tervező ablakában jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-155">The VM resource now appears in the schema designer window.</span></span> <span data-ttu-id="f643d-156">A tulajdonságok és műveletek az erőforrással ellenőrizheti.</span><span class="sxs-lookup"><span data-stu-id="f643d-156">You can examine the properties and operations associated with the resource.</span></span> <span data-ttu-id="f643d-157">Ezután a frissített sémafájlok exportálja a webszolgáltatás a virtuális könyvtárba.</span><span class="sxs-lookup"><span data-stu-id="f643d-157">Next, you will export the updated schema files into the virtual directory for the web service.</span></span>

#### <a name="exporting-schema-files-from-the-schema-designer"></a><span data-ttu-id="f643d-158">A séma-tervezőből séma fájlok exportálása</span><span class="sxs-lookup"><span data-stu-id="f643d-158">Exporting schema files from the schema designer</span></span>

1. <span data-ttu-id="f643d-159">Kattintson a jobb gombbal egy üres területre a séma-Tervező ablakában, és kattintson a **sémafájl** ; **Exportálása**.</span><span class="sxs-lookup"><span data-stu-id="f643d-159">Right-click on a blank area of the schema designer window, and click **Schema file** ; **Export**.</span></span> <span data-ttu-id="f643d-160">A **Mentés másként** párbeszédpanel jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="f643d-160">The **Save As** dialog appears.</span></span>

2. <span data-ttu-id="f643d-161">Keresse meg az ugyanabban a könyvtárban, ahol a MOF-fájlt importált.</span><span class="sxs-lookup"><span data-stu-id="f643d-161">Navigate to the same directory from where you imported the MOF file.</span></span> <span data-ttu-id="f643d-162">A fájl neve megegyezik az eredeti MOF-fájlt (Schema.mof alapértelmezés szerint), és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="f643d-162">Name the file the same as the original MOF file (Schema.mof by default), and click **Save**.</span></span> <span data-ttu-id="f643d-163">Győződjön meg arról, hogy szeretné-e a meglévő fájl felülírásához.</span><span class="sxs-lookup"><span data-stu-id="f643d-163">Confirm that you want to overwrite the existing file.</span></span>

   <span data-ttu-id="f643d-164">Bár ez a nem explicit módon meghatározott a **Mentés másként** párbeszédpanelen Ez felváltja a Schema.mof és a Schema.xml fájlokat.</span><span class="sxs-lookup"><span data-stu-id="f643d-164">Although it is not explicitly stated in the **Save As** dialog, this replaces both the Schema.mof and Schema.xml files.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f643d-165">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="f643d-165">Next Steps</span></span>

<span data-ttu-id="f643d-166">Az új VM-erőforrás elérését a Management OData webszolgáltatást, előbb frissíteni kell a hozzáférést a Hyper-V Windows PowerShell-modul leírtak szerint RbacConfiguration.xml fájl [konfigurálása szerepkör-alapú hitelesítést](./configuring-role-based-authorization.md), és indítsa újra a webszolgáltatást is kell.</span><span class="sxs-lookup"><span data-stu-id="f643d-166">Before you access the new VM resource from the Management OData web service, you must update the RbacConfiguration.xml file to allow access to the Hyper-V Windows PowerShell module as described in [Configuring Role-based Authorization](./configuring-role-based-authorization.md), and you will also need to restart the web service.</span></span>