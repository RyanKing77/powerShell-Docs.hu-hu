---
title: Jóváhagyás kérése a parancsmagok |} A Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- ConfirmImpact [PowerShell Programmer's Guide], described
- ShouldContinue [PowerShell Programmer's Guide], described
- user feedback [PowerShell Programmer's Guide], requesting
- ShouldProcess [PowerShell Programmer's Guide], described
- ConfirmPreference [PowerShell Programmer's Guide], described
ms.assetid: 37d6e87f-57b7-40bd-b645-392cf0b6e88e
caps.latest.revision: 13
ms.openlocfilehash: ec441831f5e3231a44c9875d1b6d2bf6280a6965
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/03/2019
ms.locfileid: "56844988"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="e5933-102">Megerősítés kérése parancsmagoktól</span><span class="sxs-lookup"><span data-stu-id="e5933-102">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="e5933-103">Parancsmagok igényeljen megerősítő, amelyek készül, hogy hajtson végre módosítást a rendszer a Windows PowerShell környezetben kívül esik.</span><span class="sxs-lookup"><span data-stu-id="e5933-103">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="e5933-104">Például a parancsmag arra készül, hogy adjon hozzá egy felhasználót vagy a folyamat leállítása, ha a parancsmag elvégzéséhez szükséges felhasználói megerősítés előtt halad.</span><span class="sxs-lookup"><span data-stu-id="e5933-104">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="e5933-105">Ezzel szemben ha a parancsmag egy Windows PowerShell-változóban megváltozása, a parancsmag nem kell megerősítést.</span><span class="sxs-lookup"><span data-stu-id="e5933-105">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="e5933-106">Annak érdekében, hogy egy megerősítési kérést, a parancsmag jeleznie kell, hogy eseménymegerősítési kéréseknek támogatja, és azt meg kell hívnia a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) és [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (nem kötelező) módszer a megerősítést kérő üzenet megjelenítéséhez.</span><span class="sxs-lookup"><span data-stu-id="e5933-106">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="e5933-107">Megerősítési kérések támogatása</span><span class="sxs-lookup"><span data-stu-id="e5933-107">Supporting Confirmation Requests</span></span>

<span data-ttu-id="e5933-108">Megerősítési kérések támogatja, a parancsmag be kell állítania a `SupportsShouldProcess` paraméter, a parancsmag attribútum `true`.</span><span class="sxs-lookup"><span data-stu-id="e5933-108">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="e5933-109">Ez lehetővé teszi a `Confirm` és `WhatIf` biztosított Windows PowerShell parancsmag-paraméterek.</span><span class="sxs-lookup"><span data-stu-id="e5933-109">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="e5933-110">A `Confirm` paraméter lehetővé teszi, hogy a felhasználó szabályozza-e a megerősítési kérés jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="e5933-110">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="e5933-111">A `WhatIf` paraméter lehetővé teszi, hogy a felhasználó határozza meg, hogy a parancsmag megjelenít egy üzenetet vagy a művelet végrehajtására.</span><span class="sxs-lookup"><span data-stu-id="e5933-111">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="e5933-112">Manuálisan nem adja hozzá a `Confirm` és `WhatIf` a parancsmag paramétereit.</span><span class="sxs-lookup"><span data-stu-id="e5933-112">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="e5933-113">Az alábbi példa bemutatja a parancsmag attribútum határozza meg, amely támogatja az eseménymegerősítési kéréseknek.</span><span class="sxs-lookup"><span data-stu-id="e5933-113">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="e5933-114">A megerősítési kérés metódusok meghívása</span><span class="sxs-lookup"><span data-stu-id="e5933-114">Calling the Confirmation request methods</span></span>

<span data-ttu-id="e5933-115">A parancsmag kód hívása a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) módszer, amely módosítja a rendszer a művelet végrehajtása előtt.</span><span class="sxs-lookup"><span data-stu-id="e5933-115">In the cmdlet code, call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="e5933-116">A parancsmag Tervező, úgy, hogy ha a hívás értéket ad `false`, nem történik meg a műveletet, és a parancsmag végrehajtja a következő műveletet.</span><span class="sxs-lookup"><span data-stu-id="e5933-116">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="e5933-117">A ShouldContinue metódus hívása</span><span class="sxs-lookup"><span data-stu-id="e5933-117">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="e5933-118">A legtöbb parancsmagok kérelem megerősítő használatával csak a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metódust.</span><span class="sxs-lookup"><span data-stu-id="e5933-118">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="e5933-119">Bizonyos esetekben azonban szükség lehet további megerősítést.</span><span class="sxs-lookup"><span data-stu-id="e5933-119">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="e5933-120">Ezekben az esetekben kiegészítik a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) hívásával hívja a [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) metódust.</span><span class="sxs-lookup"><span data-stu-id="e5933-120">For these cases, supplement the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="e5933-121">Ez lehetővé teszi a parancsmag vagy a szolgáltatót, hogy több hatókörét szabályozza a **Igen, az összeset** válasz a megerősítési kérést.</span><span class="sxs-lookup"><span data-stu-id="e5933-121">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="e5933-122">Ha a parancsmag a [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) metódus, a parancsmag is meg kell egy `Force` paraméter váltani.</span><span class="sxs-lookup"><span data-stu-id="e5933-122">If a cmdlet calls the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="e5933-123">Ha a felhasználó adja meg `Force` a felhasználó a parancsmag hív meg, továbbra is meghívja a parancsmag [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), de azt kell kerülni a hívást [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="e5933-123">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="e5933-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) kivételt ad hívott nem interaktív környezetből, nem kéri a felhasználót.</span><span class="sxs-lookup"><span data-stu-id="e5933-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="e5933-125">Hozzáadás egy `Force` paraméter gondoskodik arról, hogy a parancs továbbra is elvégezhető a nem interaktív környezetben meghívásakor.</span><span class="sxs-lookup"><span data-stu-id="e5933-125">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="e5933-126">A következő példa bemutatja, hogyan hívhat meg [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) és [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="e5933-126">The following example shows how to call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="e5933-127">Viselkedését egy [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) hívás, amelyben a parancsmag meghívása a környezettől függően változhat.</span><span class="sxs-lookup"><span data-stu-id="e5933-127">The behavior of a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="e5933-128">Használja az előző irányelvek segítségével győződjön meg arról, hogy a parancsmag a többi parancsmag esetében a gazdagép környezet függetlenül konzisztens módon viselkedik.</span><span class="sxs-lookup"><span data-stu-id="e5933-128">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="e5933-129">Hívása egy példát a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metódus, lásd: [kérelem megerősítések hogyan](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="e5933-129">For an example of calling the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="e5933-130">Adja meg a hatás szintje</span><span class="sxs-lookup"><span data-stu-id="e5933-130">Specify the Impact Level</span></span>

<span data-ttu-id="e5933-131">A parancsmag létrehozásakor adja meg a változtatás a hatás szintje (a súlyosság).</span><span class="sxs-lookup"><span data-stu-id="e5933-131">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="e5933-132">Ehhez állítsa az értékét a `ConfirmImpact` paraméter a parancsmag attribútum magas, közepes vagy alacsony.</span><span class="sxs-lookup"><span data-stu-id="e5933-132">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="e5933-133">Egy értéket is megadhat `ConfirmImpact` csak is megadása a `SupportsShouldProcess` paramétert a parancsmaghoz.</span><span class="sxs-lookup"><span data-stu-id="e5933-133">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="e5933-134">A legtöbb parancsmag esetében nem kell explicit módon kell megadni `ConfirmImpact`.</span><span class="sxs-lookup"><span data-stu-id="e5933-134">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="e5933-135">Ehelyett használjon az alapértelmezett beállítás a paraméter, amely közepes.</span><span class="sxs-lookup"><span data-stu-id="e5933-135">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="e5933-136">Ha `ConfirmImpact` magas, a művelet fogja erősíteni alapértelmezés szerint.</span><span class="sxs-lookup"><span data-stu-id="e5933-136">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="e5933-137">Ezt a beállítást a magas azokat a káros műveleteket, például a merevlemez-kötet újraformázást lefoglalni.</span><span class="sxs-lookup"><span data-stu-id="e5933-137">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="e5933-138">Nem megerősítő metódusok meghívása</span><span class="sxs-lookup"><span data-stu-id="e5933-138">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="e5933-139">Ha a parancsmag vagy a szolgáltató üzenetet küldeni, de nem a megerősítést kérő, meghívhatja az alábbi három módszerrel.</span><span class="sxs-lookup"><span data-stu-id="e5933-139">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="e5933-140">Kerülje a [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) metódus az ilyen jellegű üzenetek küldéséhez, mert [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) kimeneti vezérlőelemen van és a szokásos kimenete a parancsmag vagy a szolgáltató, amely megnehezíti parancsprogram írása.</span><span class="sxs-lookup"><span data-stu-id="e5933-140">Avoid using the [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="e5933-141">Figyelmeztetés a felhasználó, és folytatja a műveletet, a parancsmag vagy a szolgáltató meghívhatja a [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) metódust.</span><span class="sxs-lookup"><span data-stu-id="e5933-141">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="e5933-142">Kiegészítő információkat, amelyek a felhasználó használja a `Verbose` paraméter, a parancsmag vagy a szolgáltató segítségével meghívhatja a [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) metódust.</span><span class="sxs-lookup"><span data-stu-id="e5933-142">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="e5933-143">Hibakeresés szintű részletes-fejlesztőknek szántam vagy terméktámogatási megadásához a parancsmag vagy a szolgáltató meghívhatja a [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) metódust.</span><span class="sxs-lookup"><span data-stu-id="e5933-143">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="e5933-144">A felhasználó ezen információk használatával lehet lekérdezni a `Debug` paraméter.</span><span class="sxs-lookup"><span data-stu-id="e5933-144">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="e5933-145">Parancsmagok és szolgáltatók első hívás megerősítés kérése, mielőtt újabb végrehajtania egy műveletet, amely módosítja a Windows PowerShell-en kívül a rendszer a következő módszerekkel:</span><span class="sxs-lookup"><span data-stu-id="e5933-145">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="e5933-146">System.Management.Automation.Cmdlet.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="e5933-146">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="e5933-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="e5933-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="e5933-148">Ehhez a meghívásával a [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metódussal, amely felszólítja a felhasználót, hogy erősítse meg a műveletet, hogy a felhasználó hív-e a parancs alapján.</span><span class="sxs-lookup"><span data-stu-id="e5933-148">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="e5933-149">Lásd még:</span><span class="sxs-lookup"><span data-stu-id="e5933-149">See Also</span></span>

[<span data-ttu-id="e5933-150">Egy Windows PowerShell-parancsmag írása</span><span class="sxs-lookup"><span data-stu-id="e5933-150">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
